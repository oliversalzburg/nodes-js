/*! For license information please see index.645fb86a74d98a065a03.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[486],{9436:(t,e,n)=>{n(5389);var i=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},o=(t,e,n)=>(i(t,e,"read from private field"),n?n.call(t):e.get(t)),a=(t,e,n,o)=>(i(t,e,"write to private field"),o?o.call(t,n):e.set(t,n),n),r=(t,e,n)=>(i(t,e,"access private method"),n);function s(t){return null==t}var l=class extends Error{constructor(t="unexpected nil value"){super(t)}};function u(t){if(s(t))throw new l;return t}var c,h,d=/^\/\/\/ @title "(?<title>[^"]+)"$/gm,p=/^\/\/\/ @input (?<identifier>[^ ]+) "(?<label>[^"]+)".*$/gm,f=/^\/\/\/ @output (?<identifier>[^ ]+) "(?<label>[^"]+)".*$/gm,m=class{constructor(t="",e=new Array,n=new Array){this.title=t,this.inputs=e,this.outputs=n}serialize(){const t=new Array;t.push(`/// @title "${this.title}"`);for(const e of this.inputs)t.push(`/// @input ${e.identifier} "${e.label}"`);for(const e of this.outputs)t.push(`/// @output ${e.identifier} "${e.label}"`);return t.join("\n")}wrapExecutable(t){return`\n${this.inputs.map(((t,e)=>`const ${t.identifier} = this.inputs[${e}].value;`)).join("\n")}\n${this.outputs.map(((t,e)=>`let ${t.identifier} = undefined;`)).join("\n")}\n\n${t}\n\n${this.outputs.map(((t,e)=>`this.outputs[${e}].value = ${t.identifier};`)).join("\n")}\n    `.trim()}static fromNode(t){const e=new m;e.title=t.name;let n=0;for(const i of t.inputs)e.inputs.push({identifier:"input"+n++,label:i.label});let i=0;for(const n of t.outputs)e.outputs.push({identifier:"output"+i++,label:n.label});return e}static parse(t){const e=new m,n=t.matchAll(d);for(const t of n)e.title=u(t.groups).title;const i=t.matchAll(p),o=t.matchAll(f);for(const t of i)e.inputs.push({identifier:u(t.groups).identifier,label:u(t.groups).label});for(const t of o)e.outputs.push({identifier:u(t.groups).identifier,label:u(t.groups).label});return e}static stripMetadataFromBehaviorScript(t){return t.replaceAll(d,"").replaceAll(p,"").replaceAll(f,"").trim()}},g=class{constructor(t="",e=new m){c.set(this,void 0),h.set(this,void 0),a(this,c,t),a(this,h,e)}get metadata(){return o(this,h)}toExecutableBehavior(){return o(this,h).wrapExecutable(o(this,c))}toEditableScript(){return o(this,h).serialize()+"\n\n"+o(this,c)}toCodeFragment(){return o(this,c)}static fromEditableScript(t){const e=m.parse(t),n=m.stripMetadataFromBehaviorScript(t);return new g(n,e)}static fromCodeFragment(t,e){return new g(t,e)}static fromCodeFragmentForNode(t,e){return new g(t,m.fromNode(e))}},y=g;c=new WeakMap,h=new WeakMap;var v={},S=class extends HTMLElement{constructor(){super(...arguments),this.columnId=null,this.parent=null,this.label="<unlabled column>"}connectedCallback(){this.parent=u(this.parentElement).parentElement,this.classList.add(v.column),this.labelElement=document.createElement("label"),this.labelElement.textContent=this.label,this.appendChild(this.labelElement),this.valueElement=document.createElement("span"),this.valueElement.classList.add(v.value),this.valueElement.textContent=String(this.value),this.appendChild(this.valueElement),this.addEventListener("mouseenter",(t=>this.onMouseEnter(t))),this.addEventListener("mouseleave",(t=>this.onMouseLeave(t)))}init(t){this.columnId=t?.id??this.columnId}connect(t){u(this.parent).onConnect(t),this.classList.add(v.connected)}disconnect(t){this.classList.remove(v.connected)}updateUi(){u(this.labelElement).textContent=this.label,u(this.valueElement).textContent=String(this.value)}};function b(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}b((function(t){!function(){var t,e,n,i,o,a,r,s,l,u,c,h,d,p,f,m,g,y,v,S,b,x,E,w="leader-line",_={top:1,right:2,bottom:3,left:4},k={straight:1,arc:2,fluid:3,magnet:4,grid:5},C="behind",O={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},M={behind:C,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},I={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},L=[1,2,3,4],A="auto",T={x:"left",y:"top",width:"width",height:"height"},P=10,B=30,V=.5522847,N=.25*Math.PI,W=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,F="http://www.w3.org/2000/svg",D=!($="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled)&&!!document.uniqueID,R="MozAppearance"in document.documentElement.style,H=!($||R||!window.chrome||!window.CSS),z=!($||D||R||H||window.chrome||!("WebkitAppearance"in document.documentElement.style)),G=D||$?.2:.1,j={path:3,lineColor:"coral",lineSize:4,plugSE:[C,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},U=(b={}.toString,x={}.hasOwnProperty.toString,E=x.call(Object),function(t){return t&&"[object Object]"===b.call(t)&&(!(t=Object.getPrototypeOf(t))||(t=t.hasOwnProperty("constructor")&&t.constructor)&&"function"==typeof t&&x.call(t)===E)}),Y=Number.isFinite||function(t){return"number"==typeof t&&window.isFinite(t)},X=(p={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=1e3/60/2,m=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,f)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){clearTimeout(t)},y=Number.isFinite||function(t){return"number"==typeof t&&window.isFinite(t)},v=[],S=0,{add:function(t,e,n,i,o,a,r){var s,l,u,c,h,d,m,g,y,b,x=++S;function E(e,n){return{value:t(n),timeRatio:e,outputRatio:n}}if("string"==typeof o&&(o=p[o]),t=t||function(){},n<f)s=[E(0,0),E(1,1)];else{if(l=f/n,s=[E(0,0)],0===o[0]&&0===o[1]&&1===o[2]&&1===o[3])for(c=l;c<=1;c+=l)s.push(E(c,c));else for(h=u=(c=l)/10;h<=1;h+=u)b=void 0,g=(b=h*h)*h,b*=3*(y=1-h),c<=(d={x:(m=y*y*3*h)*o[0]+b*o[2]+g,y:m*o[1]+b*o[3]+g}).x&&(s.push(E(d.x,d.y)),c+=l);s.push(E(1,1))}return v.push(a={animId:x,frameCallback:e,duration:n,count:i,frames:s,reverse:!!a}),!1!==r&&at(a,r),x},remove:function(t){var e;v.some((function(n,i){return n.animId===t&&(e=i,!(n.framesStart=null))}))&&v.splice(e,1)},start:function(t,e,n){v.some((function(i){return i.animId===t&&(i.reverse=!!e,at(i,n),!0)}))},stop:function(t,e){var n;return v.some((function(i){return i.animId===t&&(e?null!=i.lastFrame&&(n=i.frames[i.lastFrame].timeRatio):(n=(Date.now()-i.framesStart)/i.duration,(n=i.reverse?1-n:n)<0?n=0:1<n&&(n=1)),!(i.framesStart=null))})),n},validTiming:function(t){return"string"==typeof t?p[t]:Array.isArray(t)&&[0,1,2,3].every((function(e){return y(t[e])&&0<=t[e]&&t[e]<=1}))?[t[0],t[1],t[2],t[3]]:null}}),$=(h={},it.m=c=[function(t,e,n){n.r(e);var i=[],o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)},r=Date.now(),s=void 0;function l(){var t=void 0,e=void 0;s&&(a.call(window,s),s=null),i.forEach((function(e){var n;(n=e.event)&&(e.event=null,e.listener(n),t=!0)})),t?(r=Date.now(),e=!0):Date.now()-r<500&&(e=!0),e&&(s=o.call(window,l))}function u(t){var e=-1;return i.some((function(n,i){return n.listener===t&&(e=i,!0)})),e}e.default={add:function(t){var e=void 0;return-1===u(t)?(i.push(e={listener:t}),function(t){e.event=t,s||l()}):null},remove:function(t){-1<(t=u(t))&&(i.splice(t,1),!i.length&&s&&(a.call(window,s),s=null))}}}],it.c=h,it.d=function(t,e,n){it.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},it.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},it.t=function(t,e){if(1&e&&(t=it(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(it.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)it.d(n,i,function(e){return t[e]}.bind(null,i));return n},it.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return it.d(e,"a",e),e},it.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},it.p="",it(it.s=0).default),Z={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:C},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:C},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:C},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},q={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},K="fade",Q=[],J={},tt=0,et={},nt=0;function it(t){if(h[t])return h[t].exports;var e=h[t]={i:t,l:!1,exports:{}};return c[t].call(e.exports,e,e.exports,it),e.l=!0,e.exports}function ot(){var t=Date.now(),e=!1;d&&(g.call(window,d),d=null),v.forEach((function(n){var i,o,a;if(n.framesStart){if((i=t-n.framesStart)>=n.duration&&n.count&&n.loopsLeft<=1)return a=n.frames[n.lastFrame=n.reverse?0:n.frames.length-1],n.frameCallback(a.value,!0,a.timeRatio,a.outputRatio),void(n.framesStart=null);if(i>n.duration){if(o=Math.floor(i/n.duration),n.count){if(o>=n.loopsLeft)return a=n.frames[n.lastFrame=n.reverse?0:n.frames.length-1],n.frameCallback(a.value,!0,a.timeRatio,a.outputRatio),void(n.framesStart=null);n.loopsLeft-=o}n.framesStart+=n.duration*o,i=t-n.framesStart}n.reverse&&(i=n.duration-i),a=n.frames[n.lastFrame=Math.round(i/f)],!1!==n.frameCallback(a.value,!1,a.timeRatio,a.outputRatio)?e=!0:n.framesStart=null}})),e&&(d=m.call(window,ot))}function at(t,e){t.framesStart=Date.now(),null!=e&&(t.framesStart-=t.duration*(t.reverse?1-e:e)),t.loopsLeft=t.count,t.lastFrame=null,ot()}function rt(t,e){var n,i;return typeof t!=typeof e||(n=U(t)?"obj":Array.isArray(t)?"array":"")!=(U(e)?"obj":Array.isArray(e)?"array":"")||("obj"===n?rt(i=Object.keys(t).sort(),Object.keys(e).sort())||i.some((function(n){return rt(t[n],e[n])})):"array"===n?t.length!==e.length||t.some((function(t,n){return rt(t,e[n])})):t!==e)}function st(t){return t&&(U(t)?Object.keys(t).reduce((function(e,n){return e[n]=st(t[n]),e}),{}):Array.isArray(t)?t.map(st):t)}function lt(t){var e,n,i,o=1,a=t=(t+"").trim();function r(t){var e=1;return(t=W.exec(t))&&(e=parseFloat(t[1]),t[2]?e=0<=e&&e<=100?e/100:1:(e<0||1<e)&&(e=1)),e}return(e=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(t))?(n=e[1].toLowerCase(),i=e[2].trim().split(/\s*,\s*/),"rgba"===n&&4===i.length?(o=r(i[3]),a="rgb("+i.slice(0,3).join(", ")+")"):"hsla"===n&&4===i.length?(o=r(i[3]),a="hsl("+i.slice(0,3).join(", ")+")"):"hwb"===n&&4===i.length?(o=r(i[3]),a="hwb("+i.slice(0,3).join(", ")+")"):"gray"===n&&2===i.length?(o=r(i[1]),a="gray("+i[0]+")"):"device-cmyk"===n&&5<=i.length&&(o=r(i[4]),a="device-cmyk("+i.slice(0,4).join(", ")+")")):(e=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(t))?a=e[1]?(o=parseInt(e[2],16)/255,"#"+e[1]):(o=parseInt(e[4]+e[4],16)/255,"#"+e[3]):"transparent"===t.toLocaleLowerCase()&&(o=0),[o,a]}function ut(t){return!(!t||t.nodeType!==Node.ELEMENT_NODE||"function"!=typeof t.getBoundingClientRect)}function ct(t,e){var n,i,o,a={};if(!(o=t.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(t.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(i in n=t.getBoundingClientRect())a[i]=n[i];if(!e){if(!(o=o.defaultView))return console.error("Cannot get window that contains the element."),null;a.left+=o.pageXOffset,a.right+=o.pageXOffset,a.top+=o.pageYOffset,a.bottom+=o.pageYOffset}return a}function ht(t,e){var n,i=[],o=t;for(e=e||window;;){if(!(n=o.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(n=n.defaultView))return console.error("Cannot get window that contains the element."),null;if(n===e)break;if(!(o=n.frameElement))return console.error("`baseWindow` was not found."),null;i.unshift(o)}return i}function dt(t,e){var n=0,i=0;return(e=ht(t,e=e||window))?e.length?(e.forEach((function(t,e){var o=ct(t,0<e);n+=o.left,i+=o.top,t=(e=t).ownerDocument.defaultView.getComputedStyle(e,""),o={left:e.clientLeft+parseFloat(t.paddingLeft),top:e.clientTop+parseFloat(t.paddingTop)},n+=o.left,i+=o.top})),(e=ct(t,!0)).left+=n,e.right+=n,e.top+=i,e.bottom+=i,e):ct(t):null}function pt(t,e){var n=t.x-e.x;return e=t.y-e.y,Math.sqrt(n*n+e*e)}function ft(t,e,n){var i=e.x-t.x;return e=e.y-t.y,{x:t.x+i*n,y:t.y+e*n,angle:Math.atan2(e,i)/(Math.PI/180)}}function mt(t,e,n){return t=Math.atan2(t.y-e.y,e.x-t.x),{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n*-1}}function gt(t,e,n,i,o){var a=(d=o*o)*o,r=1-o,s=(c=(h=r*r)*r)*t.x+3*h*o*e.x+3*r*d*n.x+a*i.x,l=c*t.y+3*h*o*e.y+3*r*d*n.y+a*i.y,u=t.x+2*o*(e.x-t.x)+d*(n.x-2*e.x+t.x),c=t.y+2*o*(e.y-t.y)+d*(n.y-2*e.y+t.y),h=e.x+2*o*(n.x-e.x)+d*(i.x-2*n.x+e.x),d=(a=e.y+2*o*(n.y-e.y)+d*(i.y-2*n.y+e.y),r*t.x+o*e.x);return t=r*t.y+o*e.y,e=r*n.x+o*i.x,o=r*n.y+o*i.y,i=90-180*Math.atan2(u-h,c-a)/Math.PI,{x:s,y:l,fromP2:{x:u,y:c},toP1:{x:h,y:a},fromP1:{x:d,y:t},toP2:{x:e,y:o},angle:i+=180<i?-180:180}}function yt(t,e,n,i,o){function a(t,e,n,i,o){return t*(t*(-3*e+9*n-9*i+3*o)+6*e-12*n+6*i)-3*e+3*n}var r,s,l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],u=0,c=(o=null==o||1<o?1:o<0?0:o)/2;return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach((function(o,h){r=a(s=c*o+c,t.x,e.x,n.x,i.x),s=a(s,t.y,e.y,n.y,i.y),s=r*r+s*s,u+=l[h]*Math.sqrt(s)})),c*u}function vt(t,e,n,i,o){for(var a,r=.5,s=1-r;a=yt(t,e,n,i,s),!(Math.abs(a-o)<=.01);)s+=(a<o?1:-1)*(r/=2);return s}function St(t,e){var n;return t.forEach((function(t){t=e?t.map((function(t){return t={x:t.x,y:t.y},e(t),t})):t,(n=n||[{type:"M",values:[t[0].x,t[0].y]}]).push(t.length?2===t.length?{type:"L",values:[t[1].x,t[1].y]}:{type:"C",values:[t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]}:{type:"Z",values:[]})})),n}function bt(t){var e=[],n=0;return t.forEach((function(t){t=(2===t.length?pt:yt).apply(null,t),e.push(t),n+=t})),{segsLen:e,lenAll:n}}function xt(t,e){return null==t||null==e||t.length!==e.length||t.some((function(t,n){var i=e[n];return t.type!==i.type||t.values.some((function(t,e){return t!==i.values[e]}))}))}function Et(t,e,n){t.events[e]?t.events[e].indexOf(n)<0&&t.events[e].push(n):t.events[e]=[n]}function wt(t,e,n){var i;t.events[e]&&-1<(i=t.events[e].indexOf(n))&&t.events[e].splice(i,1)}function _t(t){r&&clearTimeout(r),Q.push(t),r=setTimeout((function(){Q.forEach((function(t){t()})),Q=[]}),0)}function kt(t,e){t.reflowTargets.indexOf(e)<0&&t.reflowTargets.push(e)}function Ct(t){t.reflowTargets.forEach((function(t){var e;e=t,setTimeout((function(){var t=e.parentNode,n=e.nextSibling;t.insertBefore(t.removeChild(e),n)}),0)})),t.reflowTargets=[]}function Ot(t,e,n,i,o,a,r){var l;"auto-start-reverse"===n?("boolean"!=typeof s&&(e.setAttribute("orient","auto-start-reverse"),s=e.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),s?e.setAttribute("orient",n):((l=o.createSVGTransform()).setRotate(180,0,0),a.transform.baseVal.appendItem(l),e.setAttribute("orient","auto"),l=!0)):(e.setAttribute("orient",n),!1===s&&a.transform.baseVal.clear()),e=e.viewBox.baseVal,l?(e.x=-i.right,e.y=-i.bottom):(e.x=i.left,e.y=i.top),e.width=i.width,e.height=i.height,D&&kt(t,r)}function Mt(t,e){return{prop:t?"markerEnd":"markerStart",orient:e?e.noRotate?"0":t?"auto":"auto-start-reverse":null}}function It(t,e){Object.keys(e).forEach((function(n){var i=e[n];t[n]=null!=i.iniValue?i.hasSE?[i.iniValue,i.iniValue]:i.iniValue:i.hasSE?i.hasProps?[{},{}]:[]:i.hasProps?{}:null}))}function Lt(t,e,n,i,o){return i!==e[n]&&(e[n]=i,o&&o.forEach((function(e){e(t,i,n)})),!0)}function At(t){function e(t,e){return t+parseFloat(e)}var n=t.document,i=t.getComputedStyle(n.documentElement,"");return t=t.getComputedStyle(n.body,""),n={x:0,y:0},"static"!==t.position?(n.x-=[i.marginLeft,i.borderLeftWidth,i.paddingLeft,t.marginLeft,t.borderLeftWidth].reduce(e,0),n.y-=[i.marginTop,i.borderTopWidth,i.paddingTop,t.marginTop,t.borderTopWidth].reduce(e,0)):"static"!==i.position&&(n.x-=[i.marginLeft,i.borderLeftWidth].reduce(e,0),n.y-=[i.marginTop,i.borderTopWidth].reduce(e,0)),n}function Tt(t){var e,n=t.document;n.getElementById("leader-line-defs")||(e=(new t.DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:white}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:black}.leader-line-caps-mask-anchor{stroke:black}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:rgba(0,0,0,0)}.leader-line-line-mask-shape{stroke:white}.leader-line-line-outline-mask-shape{stroke:black}.leader-line-plug-mask-shape{fill:white;stroke:black}.leader-line-plug-outline-mask-shape{fill:black;stroke:white}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',"image/svg+xml"),n.body.appendChild(e.documentElement),function(t){t.SVGPathElement.prototype.getPathData&&t.SVGPathElement.prototype.setPathData||function(){function e(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}var n={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},i=-1!==t.navigator.userAgent.indexOf("MSIE ");function o(t){if(!t||0===t.length)return[];var n=new e(t),i=[];if(n.initialCommandIsMoveTo())for(;n.hasMoreData();){var o=n.parseSegment();if(null===o)break;i.push(o)}return i}function a(t){return t.map((function(t){return{type:t.type,values:Array.prototype.slice.call(t.values)}}))}function r(t){var e=[],n=null,i=null,o=null,a=null,r=null,s=null,l=null;return t.forEach((function(t){var u,c,d,p,f,m,g,y;"M"===t.type?(g=t.values[0],y=t.values[1],e.push({type:"M",values:[g,y]}),a=s=g,r=l=y):"C"===t.type?(f=t.values[0],m=t.values[1],u=t.values[2],c=t.values[3],g=t.values[4],y=t.values[5],e.push({type:"C",values:[f,m,u,c,g,y]}),i=u,o=c,a=g,r=y):"L"===t.type?(g=t.values[0],y=t.values[1],e.push({type:"L",values:[g,y]}),a=g,r=y):"H"===t.type?(g=t.values[0],e.push({type:"L",values:[g,r]}),a=g):"V"===t.type?(y=t.values[0],e.push({type:"L",values:[a,y]}),r=y):"S"===t.type?(u=t.values[0],c=t.values[1],g=t.values[2],y=t.values[3],p="C"===n||"S"===n?(d=a+(a-i),r+(r-o)):(d=a,r),e.push({type:"C",values:[d,p,u,c,g,y]}),i=u,o=c,a=g,r=y):"T"===t.type?(g=t.values[0],y=t.values[1],m="Q"===n||"T"===n?(f=a+(a-i),r+(r-o)):(f=a,r),e.push({type:"C",values:[d=a+2*(f-a)/3,p=r+2*(m-r)/3,g+2*(f-g)/3,y+2*(m-y)/3,g,y]}),i=f,o=m,a=g,r=y):"Q"===t.type?(f=t.values[0],m=t.values[1],g=t.values[2],y=t.values[3],e.push({type:"C",values:[d=a+2*(f-a)/3,p=r+2*(m-r)/3,g+2*(f-g)/3,y+2*(m-y)/3,g,y]}),i=f,o=m,a=g,r=y):"A"===t.type?(c=t.values[0],d=t.values[1],p=t.values[2],f=t.values[3],m=t.values[4],g=t.values[5],y=t.values[6],0===c||0===d?(e.push({type:"C",values:[a,r,g,y,g,y]}),a=g,r=y):a===g&&r===y||h(a,r,g,y,c,d,p,f,m).forEach((function(t){e.push({type:"C",values:t}),a=g,r=y}))):"Z"===t.type&&(e.push(t),a=s,r=l),n=t.type})),e}e.prototype={parseSegment:function(){var t=this._string[this._currentIndex],e=n[t]||null;if(null===e){if(null===this._prevCommand)return null;if(null===(e=("+"===t||"-"===t||"."===t||"0"<=t&&t<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;var i=null;return"H"===(t=(this._prevCommand=e).toUpperCase())||"V"===t?i=[this._parseNumber()]:"M"===t||"L"===t||"T"===t?i=[this._parseNumber(),this._parseNumber()]:"S"===t||"Q"===t?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===t?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===t?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===t&&(this._skipOptionalSpaces(),i=[]),null===i||0<=i.indexOf(null)?null:{type:e,values:i}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var t=this._string[this._currentIndex];return n[t]||null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return"M"===t||"m"===t},_isCurrentSpace:function(){var t=this._string[this._currentIndex];return t<=" "&&(" "===t||"\n"===t||"\t"===t||"\r"===t||"\f"===t)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var t=0,e=0,n=1,i=0,o=1,a=1,r=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,o=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==s)for(var l=this._currentIndex-1,u=1;s<=l;)e+=u*(this._string[l]-"0"),--l,u*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==r&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,a=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)t*=10,t+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var c=e+i;return c*=o,t&&(c*=Math.pow(10,a*t)),r===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),c)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var t=null,e=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===e)t=0;else{if("1"!==e)return null;t=1}return this._skipOptionalSpacesOrDelimiter(),t}};var s=t.SVGPathElement.prototype.setAttribute,l=t.SVGPathElement.prototype.removeAttribute,u=t.Symbol?t.Symbol():"__cachedPathData",c=t.Symbol?t.Symbol():"__cachedNormalizedPathData",h=function(t,e,n,i,o,a,r,s,l,u){function c(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}var d=Math.PI*r/180,p=[];u?(b=u[0],x=u[1],v=u[2],S=u[3]):(t=(y=c(t,e,-d)).x,e=y.y,1<(y=(g=(t-(n=(m=c(n,i,-d)).x))/2)*g/(o*o)+(f=(e-(i=m.y))/2)*f/(a*a))&&(o*=y=Math.sqrt(y),a*=y),m=o*o,y=a*a,v=(m=(s===l?-1:1)*Math.sqrt(Math.abs((m*y-m*f*f-y*g*g)/(m*f*f+y*g*g))))*o*f/a+(t+n)/2,S=m*-a*g/o+(e+i)/2,b=Math.asin(parseFloat(((e-S)/a).toFixed(9))),x=Math.asin(parseFloat(((i-S)/a).toFixed(9))),t<v&&(b=Math.PI-b),n<v&&(x=Math.PI-x),b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),l&&x<b&&(b-=2*Math.PI),!l&&b<x&&(x-=2*Math.PI));var f,m,g,y=x-b;Math.abs(y)>120*Math.PI/180&&(f=x,m=n,g=i,x=l&&b<x?b+120*Math.PI/180*1:b+120*Math.PI/180*-1,n=v+o*Math.cos(x),i=S+a*Math.sin(x),p=h(n,i,m,g,o,a,r,0,l,[x,f,v,S])),y=x-b;var v=Math.cos(b),S=Math.sin(b),b=Math.cos(x),x=Math.sin(x);if(b=[n+(o=4/3*o*(y=Math.tan(y/4)))*x,i-(a=4/3*a*y)*b],i=[n,i],(v=[t+o*S,e-a*v])[0]=2*(y=[t,e])[0]-v[0],v[1]=2*y[1]-v[1],u)return[v,b,i].concat(p);p=[v,b,i].concat(p).join().split(",");var E=[],w=[];return p.forEach((function(t,e){e%2?w.push(c(p[e-1],p[e],d).y):w.push(c(p[e],p[e+1],d).x),6===w.length&&(E.push(w),w=[])})),E};t.SVGPathElement.prototype.setAttribute=function(t,e){"d"===t&&(this[u]=null,this[c]=null),s.call(this,t,e)},t.SVGPathElement.prototype.removeAttribute=function(t,e){"d"===t&&(this[u]=null,this[c]=null),l.call(this,t)},t.SVGPathElement.prototype.getPathData=function(t){if(t&&t.normalize)return this[c]?a(this[c]):(this[u]?h=a(this[u]):(h=o(this.getAttribute("d")||""),this[u]=a(h)),t=r((e=[],l=s=i=n=null,h.forEach((function(t){var o,a,r,u,c,h,d=t.type;"M"===d?(c=t.values[0],h=t.values[1],e.push({type:"M",values:[c,h]}),n=s=c,i=l=h):"m"===d?(c=n+t.values[0],h=i+t.values[1],e.push({type:"M",values:[c,h]}),n=s=c,i=l=h):"L"===d?(c=t.values[0],h=t.values[1],e.push({type:"L",values:[c,h]}),n=c,i=h):"l"===d?(c=n+t.values[0],h=i+t.values[1],e.push({type:"L",values:[c,h]}),n=c,i=h):"C"===d?(o=t.values[0],a=t.values[1],r=t.values[2],u=t.values[3],c=t.values[4],h=t.values[5],e.push({type:"C",values:[o,a,r,u,c,h]}),n=c,i=h):"c"===d?(o=n+t.values[0],a=i+t.values[1],r=n+t.values[2],u=i+t.values[3],c=n+t.values[4],h=i+t.values[5],e.push({type:"C",values:[o,a,r,u,c,h]}),n=c,i=h):"Q"===d?(o=t.values[0],a=t.values[1],c=t.values[2],h=t.values[3],e.push({type:"Q",values:[o,a,c,h]}),n=c,i=h):"q"===d?(o=n+t.values[0],a=i+t.values[1],c=n+t.values[2],h=i+t.values[3],e.push({type:"Q",values:[o,a,c,h]}),n=c,i=h):"A"===d?(c=t.values[5],h=t.values[6],e.push({type:"A",values:[t.values[0],t.values[1],t.values[2],t.values[3],t.values[4],c,h]}),n=c,i=h):"a"===d?(c=n+t.values[5],h=i+t.values[6],e.push({type:"A",values:[t.values[0],t.values[1],t.values[2],t.values[3],t.values[4],c,h]}),n=c,i=h):"H"===d?(c=t.values[0],e.push({type:"H",values:[c]}),n=c):"h"===d?(c=n+t.values[0],e.push({type:"H",values:[c]}),n=c):"V"===d?(h=t.values[0],e.push({type:"V",values:[h]}),i=h):"v"===d?(h=i+t.values[0],e.push({type:"V",values:[h]}),i=h):"S"===d?(r=t.values[0],u=t.values[1],c=t.values[2],h=t.values[3],e.push({type:"S",values:[r,u,c,h]}),n=c,i=h):"s"===d?(r=n+t.values[0],u=i+t.values[1],c=n+t.values[2],h=i+t.values[3],e.push({type:"S",values:[r,u,c,h]}),n=c,i=h):"T"===d?(c=t.values[0],h=t.values[1],e.push({type:"T",values:[c,h]}),n=c,i=h):"t"===d?(c=n+t.values[0],h=i+t.values[1],e.push({type:"T",values:[c,h]}),n=c,i=h):"Z"!==d&&"z"!==d||(e.push({type:"Z",values:[]}),n=s,i=l)})),e)),this[c]=a(t),t);if(this[u])return a(this[u]);var e,n,i,s,l,h=o(this.getAttribute("d")||"");return this[u]=a(h),h},t.SVGPathElement.prototype.setPathData=function(t){if(0===t.length)i?this.setAttribute("d",""):this.removeAttribute("d");else{for(var e="",n=0,o=t.length;n<o;n+=1){var a=t[n];0<n&&(e+=" "),e+=a.type,a.values&&0<a.values.length&&(e+=" "+a.values.join(" "))}this.setAttribute("d",e)}},t.SVGRectElement.prototype.getPathData=function(t){var e=this.x.baseVal.value,n=this.y.baseVal.value,i=this.width.baseVal.value,o=this.height.baseVal.value,a=(this.hasAttribute("rx")?this.rx:this.ry).baseVal.value,s=(this.hasAttribute("ry")?this.ry:this.rx).baseVal.value;return n=(n=[{type:"M",values:[e+(a=i/2<a?i/2:a),n]},{type:"H",values:[e+i-a]},{type:"A",values:[a,s=o/2<s?o/2:s,0,0,1,e+i,n+s]},{type:"V",values:[n+o-s]},{type:"A",values:[a,s,0,0,1,e+i-a,n+o]},{type:"H",values:[e+a]},{type:"A",values:[a,s,0,0,1,e,n+o-s]},{type:"V",values:[n+s]},{type:"A",values:[a,s,0,0,1,e+a,n]},{type:"Z",values:[]}]).filter((function(t){return"A"!==t.type||0!==t.values[0]&&0!==t.values[1]})),t&&!0===t.normalize?r(n):n},t.SVGCircleElement.prototype.getPathData=function(t){var e=this.cx.baseVal.value,n=this.cy.baseVal.value,i=this.r.baseVal.value;return n=[{type:"M",values:[e+i,n]},{type:"A",values:[i,i,0,0,1,e,n+i]},{type:"A",values:[i,i,0,0,1,e-i,n]},{type:"A",values:[i,i,0,0,1,e,n-i]},{type:"A",values:[i,i,0,0,1,e+i,n]},{type:"Z",values:[]}],t&&!0===t.normalize?r(n):n},t.SVGEllipseElement.prototype.getPathData=function(t){var e=this.cx.baseVal.value,n=this.cy.baseVal.value,i=this.rx.baseVal.value,o=this.ry.baseVal.value;return n=[{type:"M",values:[e+i,n]},{type:"A",values:[i,o,0,0,1,e,n+o]},{type:"A",values:[i,o,0,0,1,e-i,n]},{type:"A",values:[i,o,0,0,1,e,n-o]},{type:"A",values:[i,o,0,0,1,e+i,n]},{type:"Z",values:[]}],t&&!0===t.normalize?r(n):n},t.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},t.SVGPolylineElement.prototype.getPathData=function(){for(var t=[],e=0;e<this.points.numberOfItems;e+=1){var n=this.points.getItem(e);t.push({type:0===e?"M":"L",values:[n.x,n.y]})}return t},t.SVGPolygonElement.prototype.getPathData=function(){for(var t=[],e=0;e<this.points.numberOfItems;e+=1){var n=this.points.getItem(e);t.push({type:0===e?"M":"L",values:[n.x,n.y]})}return t.push({type:"Z",values:[]}),t}}()}(t))}function Pt(t,e){e!==t.isShown&&(!!e!=!!t.isShown&&(t.svg.style.visibility=e?"":"hidden"),t.isShown=e,t.events&&t.events.svgShow&&t.events.svgShow.forEach((function(n){n(t,e)})))}function Bt(e,n){var i,o,a,r,s,l,u,c,h,d,p,f,m,g,y,v,S,b,x,E,w,_,k,M,A,W,F,U,Y,X,$,Z,q,K,Q,J,tt,nt,it,ot,at,ut,ct,ht={};n.line&&(ht.line=(c=(i=e).options,o=i.curStats,h=i.events,d=!1,d=Lt(i,o,"line_color",c.lineColor,h.cur_line_color)||d,d=Lt(i,o,"line_colorTra",lt(o.line_color)[0]<1)||d,d=Lt(i,o,"line_strokeWidth",c.lineSize,h.cur_line_strokeWidth)||d)),(n.plug||ht.line)&&(ht.plug=(r=(a=e).options,s=a.curStats,l=a.events,u=!1,[0,1].forEach((function(t){var e,n,i,o,c,h,d,p,f=r.plugSE[t];u=Lt(a,s.plug_enabledSE,t,f!==C)||u,u=Lt(a,s.plug_plugSE,t,f)||u,u=Lt(a,s.plug_colorSE,t,p=r.plugColorSE[t]||s.line_color,l.cur_plug_colorSE)||u,u=Lt(a,s.plug_colorTraSE,t,lt(p)[0]<1)||u,f!==C&&(o=n=(e=O[I[f]]).widthR*r.plugSizeSE[t],c=i=e.heightR*r.plugSizeSE[t],z&&(o*=s.line_strokeWidth,c*=s.line_strokeWidth),u=Lt(a,s.plug_markerWidthSE,t,o)||u,u=Lt(a,s.plug_markerHeightSE,t,c)||u,s.capsMaskMarker_markerWidthSE[t]=n,s.capsMaskMarker_markerHeightSE[t]=i),s.plugOutline_plugSE[t]=s.capsMaskMarker_plugSE[t]=f,s.plug_enabledSE[t]?(p=s.line_strokeWidth/j.lineSize*r.plugSizeSE[t],s.position_plugOverheadSE[t]=e.overhead*p,s.viewBox_plugBCircleSE[t]=e.bCircle*p,h=e.sideLen*p,d=e.backLen*p):(s.position_plugOverheadSE[t]=-s.line_strokeWidth/2,s.viewBox_plugBCircleSE[t]=h=d=0),Lt(a,s.attach_plugSideLenSE,t,h,l.cur_attach_plugSideLenSE),Lt(a,s.attach_plugBackLenSE,t,d,l.cur_attach_plugBackLenSE),s.capsMaskAnchor_enabledSE[t]=!s.plug_enabledSE[t]})),u=Lt(a,s,"plug_enabled",s.plug_enabledSE[0]||s.plug_enabledSE[1])||u)),(n.lineOutline||ht.line)&&(ht.lineOutline=(h=(c=e).options,k=!1,k=Lt(c,d=c.curStats,"lineOutline_enabled",h.lineOutlineEnabled)||k,k=Lt(c,d,"lineOutline_color",h.lineOutlineColor)||k,k=Lt(c,d,"lineOutline_colorTra",lt(d.lineOutline_color)[0]<1)||k,h=d.line_strokeWidth*h.lineOutlineSize,k=Lt(c,d,"lineOutline_strokeWidth",d.line_strokeWidth-2*h)||k,k=Lt(c,d,"lineOutline_inStrokeWidth",d.lineOutline_colorTra?d.lineOutline_strokeWidth+2*G:d.line_strokeWidth-h)||k)),(n.plugOutline||ht.line||ht.plug||ht.lineOutline)&&(ht.plugOutline=(f=(p=e).options,m=p.curStats,g=!1,[0,1].forEach((function(t){var e=m.plugOutline_plugSE[t],n=e!==C?O[I[e]]:null;g=Lt(p,m.plugOutline_enabledSE,t,f.plugOutlineEnabledSE[t]&&m.plug_enabled&&m.plug_enabledSE[t]&&!!n&&!!n.outlineBase)||g,g=Lt(p,m.plugOutline_colorSE,t,e=f.plugOutlineColorSE[t]||m.lineOutline_color)||g,g=Lt(p,m.plugOutline_colorTraSE,t,lt(e)[0]<1)||g,n&&n.outlineBase&&((e=f.plugOutlineSizeSE[t])>n.outlineMax&&(e=n.outlineMax),e*=2*n.outlineBase,g=Lt(p,m.plugOutline_strokeWidthSE,t,e)||g,g=Lt(p,m.plugOutline_inStrokeWidthSE,t,m.plugOutline_colorTraSE[t]?e-G/(m.line_strokeWidth/j.lineSize)/f.plugSizeSE[t]*2:e/2)||g)})),g)),(n.faces||ht.line||ht.plug||ht.lineOutline||ht.plugOutline)&&(ht.faces=(S=(y=e).curStats,b=y.aplStats,x=y.events,E=!1,!S.line_altColor&&Lt(y,b,"line_color",v=S.line_color,x.apl_line_color)&&(y.lineFace.style.stroke=v,E=!0),Lt(y,b,"line_strokeWidth",v=S.line_strokeWidth,x.apl_line_strokeWidth)&&(y.lineShape.style.strokeWidth=v+"px",E=!0,(R||D)&&(kt(y,y.lineShape),D&&(kt(y,y.lineFace),kt(y,y.lineMaskCaps)))),Lt(y,b,"lineOutline_enabled",v=S.lineOutline_enabled,x.apl_lineOutline_enabled)&&(y.lineOutlineFace.style.display=v?"inline":"none",E=!0),S.lineOutline_enabled&&(Lt(y,b,"lineOutline_color",v=S.lineOutline_color,x.apl_lineOutline_color)&&(y.lineOutlineFace.style.stroke=v,E=!0),Lt(y,b,"lineOutline_strokeWidth",v=S.lineOutline_strokeWidth,x.apl_lineOutline_strokeWidth)&&(y.lineOutlineMaskShape.style.strokeWidth=v+"px",E=!0,D&&(kt(y,y.lineOutlineMaskCaps),kt(y,y.lineOutlineFace))),Lt(y,b,"lineOutline_inStrokeWidth",v=S.lineOutline_inStrokeWidth,x.apl_lineOutline_inStrokeWidth)&&(y.lineMaskShape.style.strokeWidth=v+"px",E=!0,D&&(kt(y,y.lineOutlineMaskCaps),kt(y,y.lineOutlineFace)))),Lt(y,b,"plug_enabled",v=S.plug_enabled,x.apl_plug_enabled)&&(y.plugsFace.style.display=v?"inline":"none",E=!0),S.plug_enabled&&[0,1].forEach((function(t){var e=S.plug_plugSE[t],n=e!==C?O[I[e]]:null,i=Mt(t,n);Lt(y,b.plug_enabledSE,t,v=S.plug_enabledSE[t],x.apl_plug_enabledSE)&&(y.plugsFace.style[i.prop]=v?"url(#"+y.plugMarkerIdSE[t]+")":"none",E=!0),S.plug_enabledSE[t]&&(Lt(y,b.plug_plugSE,t,e,x.apl_plug_plugSE)&&(y.plugFaceSE[t].href.baseVal="#"+n.elmId,Ot(y,y.plugMarkerSE[t],i.orient,n.bBox,y.svg,y.plugMarkerShapeSE[t],y.plugsFace),E=!0,R&&kt(y,y.plugsFace)),Lt(y,b.plug_colorSE,t,v=S.plug_colorSE[t],x.apl_plug_colorSE)&&(y.plugFaceSE[t].style.fill=v,E=!0,(H||z||D)&&!S.line_colorTra&&kt(y,D?y.lineMaskCaps:y.capsMaskLine)),["markerWidth","markerHeight"].forEach((function(e){var n="plug_"+e+"SE";Lt(y,b[n],t,v=S[n][t],x["apl_"+n])&&(y.plugMarkerSE[t][e].baseVal.value=v,E=!0)})),Lt(y,b.plugOutline_enabledSE,t,v=S.plugOutline_enabledSE[t],x.apl_plugOutline_enabledSE)&&(v?(y.plugFaceSE[t].style.mask="url(#"+y.plugMaskIdSE[t]+")",y.plugOutlineFaceSE[t].style.display="inline"):(y.plugFaceSE[t].style.mask="none",y.plugOutlineFaceSE[t].style.display="none"),E=!0),S.plugOutline_enabledSE[t]&&(Lt(y,b.plugOutline_plugSE,t,e,x.apl_plugOutline_plugSE)&&(y.plugOutlineFaceSE[t].href.baseVal=y.plugMaskShapeSE[t].href.baseVal=y.plugOutlineMaskShapeSE[t].href.baseVal="#"+n.elmId,[y.plugMaskSE[t],y.plugOutlineMaskSE[t]].forEach((function(t){t.x.baseVal.value=n.bBox.left,t.y.baseVal.value=n.bBox.top,t.width.baseVal.value=n.bBox.width,t.height.baseVal.value=n.bBox.height})),E=!0),Lt(y,b.plugOutline_colorSE,t,v=S.plugOutline_colorSE[t],x.apl_plugOutline_colorSE)&&(y.plugOutlineFaceSE[t].style.fill=v,E=!0,D&&(kt(y,y.lineMaskCaps),kt(y,y.lineOutlineMaskCaps))),Lt(y,b.plugOutline_strokeWidthSE,t,v=S.plugOutline_strokeWidthSE[t],x.apl_plugOutline_strokeWidthSE)&&(y.plugOutlineMaskShapeSE[t].style.strokeWidth=v+"px",E=!0),Lt(y,b.plugOutline_inStrokeWidthSE,t,v=S.plugOutline_inStrokeWidthSE[t],x.apl_plugOutline_inStrokeWidthSE)&&(y.plugMaskShapeSE[t].style.strokeWidth=v+"px",E=!0)))})),E)),(n.position||ht.line||ht.plug)&&(ht.position=function(t){var e,n,i,o,a,r,s,l,u,c,h,d,p,f,m=t.options,g=t.curStats,y=t.aplStats,v=g.position_socketXYSE,S=!1;function b(t,e){return(t=1===e?{x:t.left+t.width/2,y:t.top}:2===e?{x:t.right,y:t.top+t.height/2}:3===e?{x:t.left+t.width/2,y:t.bottom}:{x:t.left,y:t.top+t.height/2}).socketId=e,t}function x(t){return{x:t.x,y:t.y}}if(g.position_path=m.path,g.position_lineStrokeWidth=g.line_strokeWidth,g.position_socketGravitySE=e=st(m.socketGravitySE),n=[0,1].map((function(e){var n=m.anchorSE[e],i=t.optionIsAttach.anchorSE[e],o=!1!==i?et[n._id]:null,a=!1!==i&&o.conf.getStrokeWidth?o.conf.getStrokeWidth(o,t):0,r=!1!==i&&o.conf.getBBoxNest?o.conf.getBBoxNest(o,t,a):dt(n,t.baseWindow);return g.capsMaskAnchor_pathDataSE[e]=!1!==i&&o.conf.getPathData?o.conf.getPathData(o,t,a):(i=null!=(n=r).right?n.right:n.left+n.width,o=null!=n.bottom?n.bottom:n.top+n.height,[{type:"M",values:[n.left,n.top]},{type:"L",values:[i,n.top]},{type:"L",values:[i,o]},{type:"L",values:[n.left,o]},{type:"Z",values:[]}]),g.capsMaskAnchor_strokeWidthSE[e]=a,r})),s=-1,m.socketSE[0]&&m.socketSE[1]?(v[0]=b(n[0],m.socketSE[0]),v[1]=b(n[1],m.socketSE[1])):(m.socketSE[0]||m.socketSE[1]?(r=m.socketSE[0]?(a=0,1):(a=1,0),v[a]=b(n[a],m.socketSE[a]),(o=L.map((function(t){return b(n[r],t)}))).forEach((function(t){var e=pt(t,v[a]);(e<s||-1===s)&&(v[r]=t,s=e)}))):(o=L.map((function(t){return b(n[1],t)})),L.map((function(t){return b(n[0],t)})).forEach((function(t){o.forEach((function(e){var n=pt(t,e);(n<s||-1===s)&&(v[0]=t,v[1]=e,s=n)}))}))),[0,1].forEach((function(t){var e,i;m.socketSE[t]||(n[t].width||n[t].height?n[t].width||4!==v[t].socketId&&2!==v[t].socketId?n[t].height||1!==v[t].socketId&&3!==v[t].socketId||(v[t].socketId=0<=v[t?0:1].y-n[t].top?3:1):v[t].socketId=0<=v[t?0:1].x-n[t].left?2:4:(e=v[t?0:1].x-n[t].left,i=v[t?0:1].y-n[t].top,v[t].socketId=Math.abs(e)>=Math.abs(i)?0<=e?2:4:0<=i?3:1))}))),g.position_path!==y.position_path||g.position_lineStrokeWidth!==y.position_lineStrokeWidth||[0,1].some((function(t){return g.position_plugOverheadSE[t]!==y.position_plugOverheadSE[t]||(n=v[t],i=y.position_socketXYSE[t],n.x!==i.x||n.y!==i.y||n.socketId!==i.socketId)||(n=e[t],i=y.position_socketGravitySE[t],(t=null==n?"auto":Array.isArray(n)?"array":"number")!=(null==i?"auto":Array.isArray(i)?"array":"number")||("array"==t?n[0]!==i[0]||n[1]!==i[1]:n!==i));var n,i}))){switch(t.pathList.baseVal=i=[],t.pathList.animVal=null,g.position_path){case 1:i.push([x(v[0]),x(v[1])]);break;case 2:d="number"==typeof e[0]&&0<e[0]||"number"==typeof e[1]&&0<e[1],d=(p=N*(d?-1:1))-(f=Math.atan2(v[1].y-v[0].y,v[1].x-v[0].x)),f=Math.PI-f-p,p=pt(v[0],v[1])/Math.sqrt(2)*V,d={x:v[0].x+Math.cos(d)*p,y:v[0].y+Math.sin(d)*p*-1},p={x:v[1].x+Math.cos(f)*p,y:v[1].y+Math.sin(f)*p*-1},i.push([x(v[0]),d,p,x(v[1])]);break;case 3:case 4:u=[e[0],4===g.position_path?0:e[1]],c=[],h=[],v.forEach((function(t,e){var n,i=u[e],o=Array.isArray(i)?{x:i[0],y:i[1]}:"number"==typeof i?1===t.socketId?{x:0,y:-i}:2===t.socketId?{x:i,y:0}:3===t.socketId?{x:0,y:i}:{x:-i,y:0}:(n=v[e?0:1],i=0<(i=g.position_plugOverheadSE[e])?120+(8<i?3.75*(i-8):0):80+(g.position_lineStrokeWidth>4?5*(g.position_lineStrokeWidth-4):0),1===t.socketId?{x:0,y:-(o=(o=(t.y-n.y)/2)<i?i:o)}:2===t.socketId?{x:o=(o=(n.x-t.x)/2)<i?i:o,y:0}:3===t.socketId?{x:0,y:o=(o=(n.y-t.y)/2)<i?i:o}:{x:-(o=(o=(t.x-n.x)/2)<i?i:o),y:0});c[e]=t.x+o.x,h[e]=t.y+o.y})),i.push([x(v[0]),{x:c[0],y:h[0]},{x:c[1],y:h[1]},x(v[1])]);break;case 5:!function(){var t,n=[[],[]],o=[];function a(t){return 1===t?3:2===t?4:3===t?1:2}function r(t){return 2===t||4===t?"x":"y"}function s(t,e,n){var i={x:t.x,y:t.y};if(n){if(n===a(t.dirId))throw new Error("Invalid dirId: "+n);i.dirId=n}else i.dirId=t.dirId;return 1===i.dirId?i.y-=e:2===i.dirId?i.x+=e:3===i.dirId?i.y+=e:i.x-=e,i}function l(t,e){return 1===e.dirId?t.y<=e.y:2===e.dirId?t.x>=e.x:3===e.dirId?t.y>=e.y:t.x<=e.x}function u(t,e){return 1===e.dirId||3===e.dirId?t.x===e.x:t.y===e.y}function c(t){return t[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function h(t,e,n){return Math.abs(e[n]-t[n])}function d(t,e,n){return"x"===n?t.x<e.x?2:4:t.y<e.y?3:1}for(v.forEach((function(t,i){var r=x(t),l=e[i];t=Array.isArray(l)?l[0]<0?[4,-l[0]]:0<l[0]?[2,l[0]]:l[1]<0?[1,-l[1]]:0<l[1]?[3,l[1]]:[t.socketId,0]:"number"!=typeof l?[t.socketId,B]:0<=l?[t.socketId,l]:[a(t.socketId),-l],r.dirId=t[0],l=t[1],n[i].push(r),o[i]=s(r,l)}));function(){var t,e,i,a,p=[l(o[1],o[0]),l(o[0],o[1])],f=[r(o[0].dirId),r(o[1].dirId)];if(f[0]===f[1]){if(p[0]&&p[1])return void(u(o[1],o[0])||(o[0][f[0]]===o[1][f[1]]?(n[0].push(o[0]),n[1].push(o[1])):(t=o[0][f[0]]+(o[1][f[1]]-o[0][f[0]])/2,n[0].push(s(o[0],Math.abs(t-o[0][f[0]]))),n[1].push(s(o[1],Math.abs(t-o[1][f[1]]))))));p[0]!==p[1]?(e=c(p),(i=h(o[e.notContain],o[e.contain],f[e.notContain]))<B&&(o[e.notContain]=s(o[e.notContain],B-i)),n[e.notContain].push(o[e.notContain]),o[e.notContain]=s(o[e.notContain],B,u(o[e.contain],o[e.notContain])?"x"===f[e.notContain]?3:2:d(o[e.notContain],o[e.contain],"x"===f[e.notContain]?"y":"x"))):(i=h(o[0],o[1],"x"===f[0]?"y":"x"),n.forEach((function(t,e){var n=0===e?1:0;t.push(o[e]),o[e]=s(o[e],B,60<=i?d(o[e],o[n],"x"===f[e]?"y":"x"):"x"===f[e]?3:2)})))}else{if(p[0]&&p[1])return void(u(o[1],o[0])?n[1].push(o[1]):u(o[0],o[1])?n[0].push(o[0]):n[0].push("x"===f[0]?{x:o[1].x,y:o[0].y}:{x:o[0].x,y:o[1].y}));p[0]!==p[1]?(e=c(p),n[e.notContain].push(o[e.notContain]),o[e.notContain]=s(o[e.notContain],B,h(o[e.notContain],o[e.contain],f[e.contain])>=B?d(o[e.notContain],o[e.contain],f[e.contain]):o[e.contain].dirId)):(a=[{x:o[0].x,y:o[0].y},{x:o[1].x,y:o[1].y}],n.forEach((function(t,e){var n=0===e?1:0,i=h(a[e],a[n],f[e]);i<B&&(o[e]=s(o[e],B-i)),t.push(o[e]),o[e]=s(o[e],B,d(o[e],o[n],f[n]))})))}return 1}(););n[1].reverse(),n[0].concat(n[1]).forEach((function(e,n){e={x:e.x,y:e.y},0<n&&i.push([t,e]),t=e}))}()}l=[],g.position_plugOverheadSE.forEach((function(t,e){var o,a,r,s,u,c,h,d,p,f=!e;0<t?2===(o=i[a=f?0:i.length-1]).length?(l[a]=l[a]||pt.apply(null,o),l[a]>P&&(l[a]-t<P&&(t=l[a]-P),h=ft(o[0],o[1],(f?t:l[a]-t)/l[a]),i[a]=f?[h,o[1]]:[o[0],h],l[a]-=t)):(l[a]=l[a]||yt.apply(null,o),l[a]>P&&(l[a]-t<P&&(t=l[a]-P),h=gt(o[0],o[1],o[2],o[3],vt(o[0],o[1],o[2],o[3],f?t:l[a]-t)),s=f?(r=o[0],h.toP1):(r=o[3],h.fromP2),u=Math.atan2(r.y-h.y,h.x-r.x),c=pt(h,s),h.x=r.x+Math.cos(u)*t,h.y=r.y+Math.sin(u)*t*-1,s.x=h.x+Math.cos(u)*c,s.y=h.y+Math.sin(u)*c*-1,i[a]=f?[h,h.toP1,h.toP2,o[3]]:[o[0],h.fromP1,h.fromP2,h],l[a]=null)):t<0&&(o=i[a=f?0:i.length-1],h=v[e].socketId,e=-n[e]["x"==(d=4===h||2===h?"x":"y")?"width":"height"],p=(t=t<e?e:t)*(4===h||1===h?-1:1),2===o.length?o[f?0:o.length-1][d]+=p:(f?[0,1]:[o.length-2,o.length-1]).forEach((function(t){o[t][d]+=p})),l[a]=null)})),y.position_socketXYSE=st(v),y.position_plugOverheadSE=st(g.position_plugOverheadSE),y.position_path=g.position_path,y.position_lineStrokeWidth=g.position_lineStrokeWidth,y.position_socketGravitySE=st(e),S=!0,t.events.apl_position&&t.events.apl_position.forEach((function(e){e(t,i)}))}return S}(e)),(n.path||ht.position)&&(ht.path=(k=(w=e).curStats,F=w.aplStats,W=w.pathList.animVal||w.pathList.baseVal,M=k.path_edge,U=!1,W&&(M.x1=M.x2=W[0][0].x,M.y1=M.y2=W[0][0].y,k.path_pathData=_=St(W,(function(t){t.x<M.x1&&(M.x1=t.x),t.y<M.y1&&(M.y1=t.y),t.x>M.x2&&(M.x2=t.x),t.y>M.y2&&(M.y2=t.y)})),xt(_,F.path_pathData)&&(w.linePath.setPathData(_),F.path_pathData=_,U=!0,D?(kt(w,w.plugsFace),kt(w,w.lineMaskCaps)):R&&kt(w,w.linePath),w.events.apl_path&&w.events.apl_path.forEach((function(t){t(w,_)})))),U)),ht.viewBox=(W=(A=e).curStats,F=A.aplStats,U=W.path_edge,Y=W.viewBox_bBox,X=F.viewBox_bBox,$=A.svg.viewBox.baseVal,Z=A.svg.style,q=!1,F=Math.max(W.line_strokeWidth/2,W.viewBox_plugBCircleSE[0]||0,W.viewBox_plugBCircleSE[1]||0),K={x1:U.x1-F,y1:U.y1-F,x2:U.x2+F,y2:U.y2+F},A.events.new_edge4viewBox&&A.events.new_edge4viewBox.forEach((function(t){t(A,K)})),Y.x=W.lineMask_x=W.lineOutlineMask_x=W.maskBGRect_x=K.x1,Y.y=W.lineMask_y=W.lineOutlineMask_y=W.maskBGRect_y=K.y1,Y.width=K.x2-K.x1,Y.height=K.y2-K.y1,["x","y","width","height"].forEach((function(t){var e;(e=Y[t])!==X[t]&&($[t]=X[t]=e,Z[T[t]]=e+("x"===t||"y"===t?A.bodyOffset[t]:0)+"px",q=!0)})),q),ht.mask=(tt=(Q=e).curStats,nt=Q.aplStats,it=!1,tt.plug_enabled?[0,1].forEach((function(t){tt.capsMaskMarker_enabledSE[t]=tt.plug_enabledSE[t]&&tt.plug_colorTraSE[t]||tt.plugOutline_enabledSE[t]&&tt.plugOutline_colorTraSE[t]})):tt.capsMaskMarker_enabledSE[0]=tt.capsMaskMarker_enabledSE[1]=!1,tt.capsMaskMarker_enabled=tt.capsMaskMarker_enabledSE[0]||tt.capsMaskMarker_enabledSE[1],tt.lineMask_outlineMode=tt.lineOutline_enabled,tt.caps_enabled=tt.capsMaskMarker_enabled||tt.capsMaskAnchor_enabledSE[0]||tt.capsMaskAnchor_enabledSE[1],tt.lineMask_enabled=tt.caps_enabled||tt.lineMask_outlineMode,(tt.lineMask_enabled&&!tt.lineMask_outlineMode||tt.lineOutline_enabled)&&["x","y"].forEach((function(t){var e="maskBGRect_"+t;Lt(Q,nt,e,J=tt[e])&&(Q.maskBGRect[t].baseVal.value=J,it=!0)})),Lt(Q,nt,"lineMask_enabled",J=tt.lineMask_enabled)&&(Q.lineFace.style.mask=J?"url(#"+Q.lineMaskId+")":"none",it=!0,z&&kt(Q,Q.lineMask)),tt.lineMask_enabled&&(Lt(Q,nt,"lineMask_outlineMode",J=tt.lineMask_outlineMode)&&(J?(Q.lineMaskBG.style.display="none",Q.lineMaskShape.style.display="inline"):(Q.lineMaskBG.style.display="inline",Q.lineMaskShape.style.display="none"),it=!0),["x","y"].forEach((function(t){var e="lineMask_"+t;Lt(Q,nt,e,J=tt[e])&&(Q.lineMask[t].baseVal.value=J,it=!0)})),Lt(Q,nt,"caps_enabled",J=tt.caps_enabled)&&(Q.lineMaskCaps.style.display=Q.lineOutlineMaskCaps.style.display=J?"inline":"none",it=!0,z&&kt(Q,Q.capsMaskLine)),tt.caps_enabled&&([0,1].forEach((function(t){var e;Lt(Q,nt.capsMaskAnchor_enabledSE,t,J=tt.capsMaskAnchor_enabledSE[t])&&(Q.capsMaskAnchorSE[t].style.display=J?"inline":"none",it=!0,z&&kt(Q,Q.lineMask)),tt.capsMaskAnchor_enabledSE[t]&&(xt(e=tt.capsMaskAnchor_pathDataSE[t],nt.capsMaskAnchor_pathDataSE[t])&&(Q.capsMaskAnchorSE[t].setPathData(e),nt.capsMaskAnchor_pathDataSE[t]=e,it=!0),Lt(Q,nt.capsMaskAnchor_strokeWidthSE,t,J=tt.capsMaskAnchor_strokeWidthSE[t])&&(Q.capsMaskAnchorSE[t].style.strokeWidth=J+"px",it=!0))})),Lt(Q,nt,"capsMaskMarker_enabled",J=tt.capsMaskMarker_enabled)&&(Q.capsMaskLine.style.display=J?"inline":"none",it=!0),tt.capsMaskMarker_enabled&&[0,1].forEach((function(t){var e=tt.capsMaskMarker_plugSE[t],n=e!==C?O[I[e]]:null,i=Mt(t,n);Lt(Q,nt.capsMaskMarker_enabledSE,t,J=tt.capsMaskMarker_enabledSE[t])&&(Q.capsMaskLine.style[i.prop]=J?"url(#"+Q.lineMaskMarkerIdSE[t]+")":"none",it=!0),tt.capsMaskMarker_enabledSE[t]&&(Lt(Q,nt.capsMaskMarker_plugSE,t,e)&&(Q.capsMaskMarkerShapeSE[t].href.baseVal="#"+n.elmId,Ot(Q,Q.capsMaskMarkerSE[t],i.orient,n.bBox,Q.svg,Q.capsMaskMarkerShapeSE[t],Q.capsMaskLine),it=!0,R&&(kt(Q,Q.capsMaskLine),kt(Q,Q.lineFace))),["markerWidth","markerHeight"].forEach((function(e){var n="capsMaskMarker_"+e+"SE";Lt(Q,nt[n],t,J=tt[n][t])&&(Q.capsMaskMarkerSE[t][e].baseVal.value=J,it=!0)})))})))),tt.lineOutline_enabled&&["x","y"].forEach((function(t){var e="lineOutlineMask_"+t;Lt(Q,nt,e,J=tt[e])&&(Q.lineOutlineMask[t].baseVal.value=J,it=!0)})),it),n.effect&&(ut=(ot=e).curStats,ct=ot.aplStats,Object.keys(t).forEach((function(e){var n=t[e],i=e+"_enabled",o=e+"_options";e=ut[o],Lt(ot,ct,i,at=ut[i])?(at&&(ct[o]=st(e)),n[at?"init":"remove"](ot)):at&&rt(e,ct[o])&&(n.remove(ot),ct[i]=!0,ct[o]=st(e),n.init(ot))}))),(H||z)&&ht.line&&!ht.path&&kt(e,e.lineShape),H&&ht.plug&&!ht.line&&kt(e,e.plugsFace),Ct(e)}function Vt(t,e){return{duration:(Y(t.duration)&&0<t.duration?t:e).duration,timing:X.validTiming(t.timing)?t.timing:st(e.timing)}}function Nt(t,n,i,o){var a=t.curStats,r=t.aplStats,s={};function l(){["show_on","show_effect","show_animOptions"].forEach((function(t){r[t]=a[t]}))}a.show_on=n,i&&e[i]&&(a.show_effect=i,a.show_animOptions=Vt(U(o)?o:{},e[i].defaultAnimOptions)),s.show_on=a.show_on!==r.show_on,s.show_effect=a.show_effect!==r.show_effect,s.show_animOptions=rt(a.show_animOptions,r.show_animOptions),s.show_effect||s.show_animOptions?a.show_inAnim?(i=s.show_effect?e[r.show_effect].stop(t,!0,!0):e[r.show_effect].stop(t),l(),e[r.show_effect].init(t,i)):s.show_on&&(r.show_effect&&s.show_effect&&e[r.show_effect].stop(t,!0,!0),l(),e[r.show_effect].init(t)):s.show_on&&(l(),e[r.show_effect].start(t))}function Wt(t,e,n){return n={props:t,optionName:n},t.attachments.indexOf(e)<0&&(!e.conf.bind||e.conf.bind(e,n))&&(t.attachments.push(e),e.boundTargets.push(n),1)}function Ft(t,e,n){var i=t.attachments.indexOf(e);-1<i&&t.attachments.splice(i,1),e.boundTargets.some((function(n,o){return n.props===t&&(e.conf.unbind&&e.conf.unbind(e,n),i=o,!0)}))&&(e.boundTargets.splice(i,1),n||_t((function(){e.boundTargets.length||a(e)})))}function Dt(a,r){var s,l,u,c,h,d,p,f,m,g,y,v,S,b,x,E=a.options,C={};function O(t,e,n,i,o){var a={};return n?null!=i?(a.container=t[n],a.key=i):(a.container=t,a.key=n):(a.container=t,a.key=e),a.default=o,a.acceptsAuto=null==a.default,a}function I(t,e,n,i,o,a,r){var s,l,u;return r=O(t,n,o,a,r),null!=e[n]&&(l=(e[n]+"").toLowerCase())&&(r.acceptsAuto&&l===A||(u=i[l]))&&u!==r.container[r.key]&&(r.container[r.key]=u,s=!0),null!=r.container[r.key]||r.acceptsAuto||(r.container[r.key]=r.default,s=!0),s}function L(t,e,n,i,o,a,r,s,l){var u,c,h,d;if(r=O(t,n,o,a,r),!i){if(null==r.default)throw new Error("Invalid `type`: "+n);i=typeof r.default}return null!=e[n]&&(r.acceptsAuto&&(e[n]+"").toLowerCase()===A||(h=c=e[n],("number"===(d=i)?Y(h):typeof h===d)&&(c=l&&"string"===i&&c?c.trim():c,1)&&(!s||s(c))))&&c!==r.container[r.key]&&(r.container[r.key]=c,u=!0),null!=r.container[r.key]||r.acceptsAuto||(r.container[r.key]=r.default,u=!0),u}if(r=r||{},["start","end"].forEach((function(t,e){var n=r[t],i=!1;if(n&&(ut(n)||(i=o(n,"anchor")))&&n!==E.anchorSE[e]){if(!1!==a.optionIsAttach.anchorSE[e]&&Ft(a,et[E.anchorSE[e]._id]),i&&!Wt(a,et[n._id],t))throw new Error("Can't bind attachment");E.anchorSE[e]=n,a.optionIsAttach.anchorSE[e]=i,s=C.position=!0}})),!E.anchorSE[0]||!E.anchorSE[1]||E.anchorSE[0]===E.anchorSE[1])throw new Error("`start` and `end` are required.");function T(t){var e=h.appendChild(b.createElementNS(F,"mask"));return e.id=t,e.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[e.x,e.y,e.width,e.height].forEach((function(t){t.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)})),e}function P(t){var e=h.appendChild(b.createElementNS(F,"marker"));return e.id=t,e.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,e.viewBox.baseVal||e.setAttribute("viewBox","0 0 0 0"),e}function B(t){return[t.width,t.height].forEach((function(t){t.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)})),t}s&&(y=function(t,e){var n,i;if(!(t=ht(t))||!(n=ht(e)))throw new Error("Cannot get frames.");return t.length&&n.length&&(t.reverse(),n.reverse(),t.some((function(t){return n.some((function(e){return e===t&&(i=e.contentWindow,!0)}))}))),i||window}(!1!==a.optionIsAttach.anchorSE[0]?et[E.anchorSE[0]._id].element:E.anchorSE[0],!1!==a.optionIsAttach.anchorSE[1]?et[E.anchorSE[1]._id].element:E.anchorSE[1]))!==a.baseWindow&&(u=y,S=(l=a).aplStats,b=u.document,x=w+"-"+l._id,l.pathList={},It(S,Z),Object.keys(t).forEach((function(e){var n=e+"_enabled";S[n]&&(t[e].remove(l),S[n]=!1)})),l.baseWindow&&l.svg&&l.baseWindow.document.body.removeChild(l.svg),Tt(l.baseWindow=u),l.bodyOffset=At(u),l.svg=c=b.createElementNS(F,"svg"),c.className.baseVal=w,c.viewBox.baseVal||c.setAttribute("viewBox","0 0 0 0"),l.defs=h=c.appendChild(b.createElementNS(F,"defs")),l.linePath=p=h.appendChild(b.createElementNS(F,"path")),p.id=f=x+"-line-path",p.className.baseVal=w+"-line-path",z&&(p.style.fill="none"),l.lineShape=p=h.appendChild(b.createElementNS(F,"use")),p.id=m=x+"-line-shape",p.href.baseVal="#"+f,(d=h.appendChild(b.createElementNS(F,"g"))).id=g=x+"-caps",l.capsMaskAnchorSE=[0,1].map((function(){var t=d.appendChild(b.createElementNS(F,"path"));return t.className.baseVal=w+"-caps-mask-anchor",t})),l.lineMaskMarkerIdSE=[x+"-caps-mask-marker-0",x+"-caps-mask-marker-1"],l.capsMaskMarkerSE=[0,1].map((function(t){return P(l.lineMaskMarkerIdSE[t])})),l.capsMaskMarkerShapeSE=[0,1].map((function(t){return(t=l.capsMaskMarkerSE[t].appendChild(b.createElementNS(F,"use"))).className.baseVal=w+"-caps-mask-marker-shape",t})),l.capsMaskLine=p=d.appendChild(b.createElementNS(F,"use")),p.className.baseVal=w+"-caps-mask-line",p.href.baseVal="#"+m,l.maskBGRect=p=B(h.appendChild(b.createElementNS(F,"rect"))),p.id=y=x+"-mask-bg-rect",p.className.baseVal=w+"-mask-bg-rect",z&&(p.style.fill="white"),l.lineMask=B(T(l.lineMaskId=x+"-line-mask")),l.lineMaskBG=p=l.lineMask.appendChild(b.createElementNS(F,"use")),p.href.baseVal="#"+y,l.lineMaskShape=p=l.lineMask.appendChild(b.createElementNS(F,"use")),p.className.baseVal=w+"-line-mask-shape",p.href.baseVal="#"+f,p.style.display="none",l.lineMaskCaps=p=l.lineMask.appendChild(b.createElementNS(F,"use")),p.href.baseVal="#"+g,l.lineOutlineMask=B(T(u=x+"-line-outline-mask")),(p=l.lineOutlineMask.appendChild(b.createElementNS(F,"use"))).href.baseVal="#"+y,l.lineOutlineMaskShape=p=l.lineOutlineMask.appendChild(b.createElementNS(F,"use")),p.className.baseVal=w+"-line-outline-mask-shape",p.href.baseVal="#"+f,l.lineOutlineMaskCaps=p=l.lineOutlineMask.appendChild(b.createElementNS(F,"use")),p.href.baseVal="#"+g,l.face=c.appendChild(b.createElementNS(F,"g")),l.lineFace=p=l.face.appendChild(b.createElementNS(F,"use")),p.href.baseVal="#"+m,l.lineOutlineFace=p=l.face.appendChild(b.createElementNS(F,"use")),p.href.baseVal="#"+m,p.style.mask="url(#"+u+")",p.style.display="none",l.plugMaskIdSE=[x+"-plug-mask-0",x+"-plug-mask-1"],l.plugMaskSE=[0,1].map((function(t){return T(l.plugMaskIdSE[t])})),l.plugMaskShapeSE=[0,1].map((function(t){return(t=l.plugMaskSE[t].appendChild(b.createElementNS(F,"use"))).className.baseVal=w+"-plug-mask-shape",t})),v=[],l.plugOutlineMaskSE=[0,1].map((function(t){return T(v[t]=x+"-plug-outline-mask-"+t)})),l.plugOutlineMaskShapeSE=[0,1].map((function(t){return(t=l.plugOutlineMaskSE[t].appendChild(b.createElementNS(F,"use"))).className.baseVal=w+"-plug-outline-mask-shape",t})),l.plugMarkerIdSE=[x+"-plug-marker-0",x+"-plug-marker-1"],l.plugMarkerSE=[0,1].map((function(t){return t=P(l.plugMarkerIdSE[t]),z&&(t.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),t})),l.plugMarkerShapeSE=[0,1].map((function(t){return l.plugMarkerSE[t].appendChild(b.createElementNS(F,"g"))})),l.plugFaceSE=[0,1].map((function(t){return l.plugMarkerShapeSE[t].appendChild(b.createElementNS(F,"use"))})),l.plugOutlineFaceSE=[0,1].map((function(t){var e=l.plugMarkerShapeSE[t].appendChild(b.createElementNS(F,"use"));return e.style.mask="url(#"+v[t]+")",e.style.display="none",e})),l.plugsFace=p=l.face.appendChild(b.createElementNS(F,"use")),p.className.baseVal=w+"-plugs-face",p.href.baseVal="#"+m,p.style.display="none",l.curStats.show_inAnim?(l.isShown=1,e[S.show_effect].stop(l,!0)):l.isShown||(c.style.visibility="hidden"),b.body.appendChild(c),[0,1,2].forEach((function(t){var e;(t=l.options.labelSEM[t])&&o(t,"label")&&(e=et[t._id]).conf.initSvg&&e.conf.initSvg(e,l)})),C.line=C.plug=C.lineOutline=C.plugOutline=C.faces=C.effect=!0),C.position=I(E,r,"path",k,null,null,j.path)||C.position,C.position=I(E,r,"startSocket",_,"socketSE",0)||C.position,C.position=I(E,r,"endSocket",_,"socketSE",1)||C.position,[r.startSocketGravity,r.endSocketGravity].forEach((function(t,e){var n,i,o=!1;null!=t&&(Array.isArray(t)?Y(t[0])&&Y(t[1])&&(o=[t[0],t[1]],Array.isArray(E.socketGravitySE[e])&&(n=o,i=E.socketGravitySE[e],n.length===i.length&&n.every((function(t,e){return t===i[e]})))&&(o=!1)):((t+"").toLowerCase()===A?o=null:Y(t)&&0<=t&&(o=t),o===E.socketGravitySE[e]&&(o=!1)),!1!==o&&(E.socketGravitySE[e]=o,C.position=!0))})),C.line=L(E,r,"color",null,"lineColor",null,j.lineColor,null,!0)||C.line,C.line=L(E,r,"size",null,"lineSize",null,j.lineSize,(function(t){return 0<t}))||C.line,["startPlug","endPlug"].forEach((function(t,e){C.plug=I(E,r,t,M,"plugSE",e,j.plugSE[e])||C.plug,C.plug=L(E,r,t+"Color","string","plugColorSE",e,null,null,!0)||C.plug,C.plug=L(E,r,t+"Size",null,"plugSizeSE",e,j.plugSizeSE[e],(function(t){return 0<t}))||C.plug})),C.lineOutline=L(E,r,"outline",null,"lineOutlineEnabled",null,j.lineOutlineEnabled)||C.lineOutline,C.lineOutline=L(E,r,"outlineColor",null,"lineOutlineColor",null,j.lineOutlineColor,null,!0)||C.lineOutline,C.lineOutline=L(E,r,"outlineSize",null,"lineOutlineSize",null,j.lineOutlineSize,(function(t){return 0<t&&t<=.48}))||C.lineOutline,["startPlugOutline","endPlugOutline"].forEach((function(t,e){C.plugOutline=L(E,r,t,null,"plugOutlineEnabledSE",e,j.plugOutlineEnabledSE[e])||C.plugOutline,C.plugOutline=L(E,r,t+"Color","string","plugOutlineColorSE",e,null,null,!0)||C.plugOutline,C.plugOutline=L(E,r,t+"Size",null,"plugOutlineSizeSE",e,j.plugOutlineSizeSE[e],(function(t){return 1<=t}))||C.plugOutline})),["startLabel","endLabel","middleLabel"].forEach((function(t,e){var s,l,u,c=r[t],h=E.labelSEM[e]&&!a.optionIsAttach.labelSEM[e]?et[E.labelSEM[e]._id].text:E.labelSEM[e],d=!1;if((s="string"==typeof c)&&(c=c.trim()),(s||c&&(d=o(c,"label")))&&c!==h){if(E.labelSEM[e]&&(Ft(a,et[E.labelSEM[e]._id]),E.labelSEM[e]=""),c){if(d?(l=et[(u=c)._id]).boundTargets.slice().forEach((function(t){l.conf.removeOption(l,t)})):u=new i(n.captionLabel,[c]),!Wt(a,et[u._id],t))throw new Error("Can't bind attachment");E.labelSEM[e]=u}a.optionIsAttach.labelSEM[e]=d}})),Object.keys(t).forEach((function(e){var n,i,o=t[e],s=e+"_enabled",l=e+"_options";function u(t){var e={};return o.optionsConf.forEach((function(n){var i=n[0],o=n[3];null==n[4]||e[o]||(e[o]=[]),("function"==typeof i?i:"id"===i?I:L).apply(null,[e,t].concat(n.slice(1)))})),e}function c(t){var n,i=e+"_animOptions";return t.hasOwnProperty("animation")?U(t.animation)?n=a.curStats[i]=Vt(t.animation,o.defaultAnimOptions):(n=!!t.animation,a.curStats[i]=n?Vt({},o.defaultAnimOptions):null):(n=!!o.defaultEnabled,a.curStats[i]=n?Vt({},o.defaultAnimOptions):null),n}r.hasOwnProperty(e)&&(n=r[e],U(n)?(a.curStats[s]=!0,i=a.curStats[l]=u(n),o.anim&&(a.curStats[l].animation=c(n))):(i=a.curStats[s]=!!n)&&(a.curStats[l]=u({}),o.anim&&(a.curStats[l].animation=c({}))),rt(i,E[e])&&(E[e]=i,C.effect=!0))})),Bt(a,C)}function Rt(n,i,o){var a={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};It(a.curStats,Z),It(a.aplStats,Z),Object.keys(t).forEach((function(e){var n=t[e].stats;It(a.curStats,n),It(a.aplStats,n),a.options[e]=!1})),It(a.curStats,q),It(a.aplStats,q),a.curStats.show_effect=K,a.curStats.show_animOptions=st(e[K].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++tt}),a._id=this._id,J[this._id]=a,1===arguments.length&&(o=n,n=null),o=o||{},(n||i)&&(o=st(o),n&&(o.start=n),i&&(o.end=i)),a.isShown=a.aplStats.show_on=!o.hide,this.setOptions(o)}function Ht(t){return function(e){var n={};n[t]=e,this.setOptions(n)}}function zt(t,e){var n,i={conf:t,curStats:{},aplStats:{},boundTargets:[]},o={};t.argOptions.every((function(t){return!(!e.length||("string"==typeof t.type?typeof e[0]!==t.type:"function"!=typeof t.type||!t.type(e[0]))||(o[t.optionName]=e.shift(),0))})),n=e.length&&U(e[0])?st(e[0]):{},Object.keys(o).forEach((function(t){n[t]=o[t]})),t.stats&&(It(i.curStats,t.stats),It(i.aplStats,t.stats)),Object.defineProperty(this,"_id",{value:++nt}),Object.defineProperty(this,"isRemoved",{get:function(){return!et[this._id]}}),i._id=this._id,t.init&&!t.init(i,n)||(et[this._id]=i)}t={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(t){return 0<t}],["type","gap","number",null,null,null,function(t){return 0<t}]],init:function(e){Et(e,"apl_line_strokeWidth",t.dash.update),e.lineFace.style.strokeDashoffset=0,t.dash.update(e)},remove:function(e){var n=e.curStats;wt(e,"apl_line_strokeWidth",t.dash.update),n.dash_animId&&(X.remove(n.dash_animId),n.dash_animId=null),e.lineFace.style.strokeDasharray="none",e.lineFace.style.strokeDashoffset=0,It(e.aplStats,t.dash.stats)},update:function(t){var e,n=t.curStats,i=t.aplStats,o=i.dash_options,a=!1;n.dash_len=o.len||2*i.line_strokeWidth,n.dash_gap=o.gap||i.line_strokeWidth,n.dash_maxOffset=n.dash_len+n.dash_gap,a=Lt(t,i,"dash_len",n.dash_len)||a,(a=Lt(t,i,"dash_gap",n.dash_gap)||a)&&(t.lineFace.style.strokeDasharray=i.dash_len+","+i.dash_gap),n.dash_animOptions?(a=Lt(t,i,"dash_maxOffset",n.dash_maxOffset),i.dash_animOptions&&(a||rt(n.dash_animOptions,i.dash_animOptions))&&(n.dash_animId&&(e=X.stop(n.dash_animId),X.remove(n.dash_animId)),i.dash_animOptions=null),i.dash_animOptions||(n.dash_animId=X.add((function(t){return(1-t)*i.dash_maxOffset+"px"}),(function(e){t.lineFace.style.strokeDashoffset=e}),n.dash_animOptions.duration,0,n.dash_animOptions.timing,!1,e),i.dash_animOptions=st(n.dash_animOptions))):i.dash_animOptions&&(n.dash_animId&&(X.remove(n.dash_animId),n.dash_animId=null),t.lineFace.style.strokeDashoffset=0,i.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(e){var n=e.baseWindow.document,i=e.defs,o=w+"-"+e._id+"-gradient";e.efc_gradient_gradient=i=i.appendChild(n.createElementNS(F,"linearGradient")),i.id=o,i.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[i.x1,i.y1,i.x2,i.y2].forEach((function(t){t.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)})),e.efc_gradient_stopSE=[0,1].map((function(t){var i=e.efc_gradient_gradient.appendChild(n.createElementNS(F,"stop"));try{i.offset.baseVal=t}catch(e){if(e.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw e;i.setAttribute("offset",t)}return i})),Et(e,"cur_plug_colorSE",t.gradient.update),Et(e,"apl_path",t.gradient.update),e.curStats.line_altColor=!0,e.lineFace.style.stroke="url(#"+o+")",t.gradient.update(e)},remove:function(e){e.efc_gradient_gradient&&(e.defs.removeChild(e.efc_gradient_gradient),e.efc_gradient_gradient=e.efc_gradient_stopSE=null),wt(e,"cur_plug_colorSE",t.gradient.update),wt(e,"apl_path",t.gradient.update),e.curStats.line_altColor=!1,e.lineFace.style.stroke=e.curStats.line_color,It(e.aplStats,t.gradient.stats)},update:function(t){var e,n=t.curStats,i=t.aplStats,o=i.gradient_options,a=t.pathList.animVal||t.pathList.baseVal;[0,1].forEach((function(t){n.gradient_colorSE[t]=o.colorSE[t]||n.plug_colorSE[t]})),e=a[0][0],n.gradient_pointSE[0]={x:e.x,y:e.y},e=(a=a[a.length-1])[a.length-1],n.gradient_pointSE[1]={x:e.x,y:e.y},[0,1].forEach((function(e){var o;Lt(t,i.gradient_colorSE,e,o=n.gradient_colorSE[e])&&(z?(o=lt(o),t.efc_gradient_stopSE[e].style.stopColor=o[1],t.efc_gradient_stopSE[e].style.stopOpacity=o[0]):t.efc_gradient_stopSE[e].style.stopColor=o),["x","y"].forEach((function(a){(o=n.gradient_pointSE[e][a])!==i.gradient_pointSE[e][a]&&(t.efc_gradient_gradient[a+(e+1)].baseVal.value=i.gradient_pointSE[e][a]=o)}))}))}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(t){return 0<=t}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(t){return 0<=t&&t<=1}]],init:function(e){var n,i,o,a,r=e.baseWindow.document,s=e.defs,l=w+"-"+e._id+"-dropShadow",c=(n=r,i=l,a={},"boolean"!=typeof u&&(u=!!window.SVGFEDropShadowElement&&!z),a.elmsAppend=[a.elmFilter=r=n.createElementNS(F,"filter")],r.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,r.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),r.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),r.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),r.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),r.id=i,u?(a.elmOffset=a.elmBlur=o=r.appendChild(n.createElementNS(F,"feDropShadow")),a.styleFlood=o.style):(a.elmBlur=r.appendChild(n.createElementNS(F,"feGaussianBlur")),a.elmOffset=o=r.appendChild(n.createElementNS(F,"feOffset")),o.result.baseVal="offsetblur",o=r.appendChild(n.createElementNS(F,"feFlood")),a.styleFlood=o.style,(o=r.appendChild(n.createElementNS(F,"feComposite"))).in2.baseVal="offsetblur",o.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(o=r.appendChild(n.createElementNS(F,"feMerge"))).appendChild(n.createElementNS(F,"feMergeNode")),o.appendChild(n.createElementNS(F,"feMergeNode")).in1.baseVal="SourceGraphic"),a);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach((function(t){e["efc_dropShadow_"+t]=c[t]})),c.elmsAppend.forEach((function(t){s.appendChild(t)})),e.face.setAttribute("filter","url(#"+l+")"),Et(e,"new_edge4viewBox",t.dropShadow.adjustEdge),t.dropShadow.update(e)},remove:function(e){var n=e.defs;e.efc_dropShadow_elmsAppend&&(e.efc_dropShadow_elmsAppend.forEach((function(t){n.removeChild(t)})),e.efc_dropShadow_elmFilter=e.efc_dropShadow_elmOffset=e.efc_dropShadow_elmBlur=e.efc_dropShadow_styleFlood=e.efc_dropShadow_elmsAppend=null),wt(e,"new_edge4viewBox",t.dropShadow.adjustEdge),Bt(e,{}),e.face.removeAttribute("filter"),It(e.aplStats,t.dropShadow.stats)},update:function(t){var e,n,i=t.curStats,o=t.aplStats,a=o.dropShadow_options;i.dropShadow_dx=e=a.dx,Lt(t,o,"dropShadow_dx",e)&&(t.efc_dropShadow_elmOffset.dx.baseVal=e,n=!0),i.dropShadow_dy=e=a.dy,Lt(t,o,"dropShadow_dy",e)&&(t.efc_dropShadow_elmOffset.dy.baseVal=e,n=!0),i.dropShadow_blur=e=a.blur,Lt(t,o,"dropShadow_blur",e)&&(t.efc_dropShadow_elmBlur.setStdDeviation(e,e),n=!0),n&&Bt(t,{}),i.dropShadow_color=e=a.color,Lt(t,o,"dropShadow_color",e)&&(t.efc_dropShadow_styleFlood.floodColor=e),i.dropShadow_opacity=e=a.opacity,Lt(t,o,"dropShadow_opacity",e)&&(t.efc_dropShadow_styleFlood.floodOpacity=e)},adjustEdge:function(t,e){var n,i=t.curStats,o=t.aplStats;null!=i.dropShadow_dx&&(n=3*i.dropShadow_blur,(n={x1:e.x1-n+i.dropShadow_dx,y1:e.y1-n+i.dropShadow_dy,x2:e.x2+n+i.dropShadow_dx,y2:e.y2+n+i.dropShadow_dy}).x1<e.x1&&(e.x1=n.x1),n.y1<e.y1&&(e.y1=n.y1),n.x2>e.x2&&(e.x2=n.x2),n.y2>e.y2&&(e.y2=n.y2),["x","y"].forEach((function(n){var a,r="dropShadow_"+n;i[r]=a=e[n+"1"],Lt(t,o,r,a)&&(t.efc_dropShadow_elmFilter[n].baseVal.value=a)})))}}},Object.keys(t).forEach((function(e){var n=t[e],i=n.stats;i[e+"_enabled"]={iniValue:!1},i[e+"_options"]={hasProps:!0},n.anim&&(i[e+"_animOptions"]={},i[e+"_animId"]={})})),e={none:{defaultAnimOptions:{},init:function(t,n){var i=t.curStats;i.show_animId&&(X.remove(i.show_animId),i.show_animId=null),e.none.start(t,n)},start:function(t,n){e.none.stop(t,!0)},stop:function(t,e,n){var i=t.curStats;return n=null!=n?n:t.aplStats.show_on,i.show_inAnim=!1,e&&Pt(t,n),n?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(t,n){var i=t.curStats,o=t.aplStats;i.show_animId&&X.remove(i.show_animId),i.show_animId=X.add((function(t){return t}),(function(n,i){i?e.fade.stop(t,!0):(t.svg.style.opacity=n+"",D&&(kt(t,t.svg),Ct(t)))}),o.show_animOptions.duration,1,o.show_animOptions.timing,null,!1),e.fade.start(t,n)},start:function(t,e){var n,i=t.curStats;i.show_inAnim&&(n=X.stop(i.show_animId)),Pt(t,1),i.show_inAnim=!0,X.start(i.show_animId,!t.aplStats.show_on,null!=e?e:n)},stop:function(t,e,n){var i,o=t.curStats;return n=null!=n?n:t.aplStats.show_on,i=o.show_inAnim?X.stop(o.show_animId):n?1:0,o.show_inAnim=!1,e&&(t.svg.style.opacity=n?"":"0",Pt(t,n)),i}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(t,n){var i=t.curStats,o=t.aplStats,a=t.pathList.baseVal,r=bt(a),s=r.segsLen,l=r.lenAll;i.show_animId&&X.remove(i.show_animId),i.show_animId=X.add((function(t){var e,n,i,o=-1;if(0===t)n=[[a[0][0],a[0][0]]];else if(1===t)n=a;else{for(e=l*t,n=[];e>=s[++o];)n.push(a[o]),e-=s[o];e&&(2===(i=a[o]).length?n.push([i[0],ft(i[0],i[1],e/s[o])]):(t=gt(i[0],i[1],i[2],i[3],vt(i[0],i[1],i[2],i[3],e)),n.push([i[0],t.fromP1,t.fromP2,t])))}return n}),(function(n,i){i?e.draw.stop(t,!0):(t.pathList.animVal=n,Bt(t,{path:!0}))}),o.show_animOptions.duration,1,o.show_animOptions.timing,null,!1),e.draw.start(t,n)},start:function(t,n){var i,o=t.curStats;o.show_inAnim&&(i=X.stop(o.show_animId)),Pt(t,1),o.show_inAnim=!0,Et(t,"apl_position",e.draw.update),X.start(o.show_animId,!t.aplStats.show_on,null!=n?n:i)},stop:function(t,e,n){var i,o=t.curStats;return n=null!=n?n:t.aplStats.show_on,i=o.show_inAnim?X.stop(o.show_animId):n?1:0,o.show_inAnim=!1,e&&(t.pathList.animVal=n?null:[[t.pathList.baseVal[0][0],t.pathList.baseVal[0][0]]],Bt(t,{path:!0}),Pt(t,n)),i},update:function(t){wt(t,"apl_position",e.draw.update),t.curStats.show_inAnim?e.draw.init(t,e.draw.stop(t)):t.aplStats.show_animOptions={}}}},[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach((function(t){var e=t[0],n=t[1],i=t[2];Object.defineProperty(Rt.prototype,e,{get:function(){var t=null!=i?J[this._id].options[n][i]:n?J[this._id].options[n]:J[this._id].options[e];return null==t?A:st(t)},set:Ht(e),enumerable:!0})})),[["path",k],["startSocket",_,"socketSE",0],["endSocket",_,"socketSE",1],["startPlug",M,"plugSE",0],["endPlug",M,"plugSE",1]].forEach((function(t){var e=t[0],n=t[1],i=t[2],o=t[3];Object.defineProperty(Rt.prototype,e,{get:function(){var t,a=null!=o?J[this._id].options[i][o]:i?J[this._id].options[i]:J[this._id].options[e];return a?Object.keys(n).some((function(e){return n[e]===a&&(t=e,!0)}))?t:new Error("It's broken"):A},set:Ht(e),enumerable:!0})})),Object.keys(t).forEach((function(e){var n=t[e];Object.defineProperty(Rt.prototype,e,{get:function(){var t,i,o=J[this._id].options[e];return U(o)?(t=o,i=n.optionsConf.reduce((function(e,n){var i,o=n[0],a=n[1],r=n[2],s=n[3],l=null!=(n=n[4])?t[s][n]:s?t[s]:t[a];return e[a]="id"===o?l?Object.keys(r).some((function(t){return r[t]===l&&(i=t,!0)}))?i:new Error("It's broken"):A:null==l?A:st(l),e}),{}),n.anim&&(i.animation=st(t.animation)),i):o},set:Ht(e),enumerable:!0})})),["startLabel","endLabel","middleLabel"].forEach((function(t,e){Object.defineProperty(Rt.prototype,t,{get:function(){var t=J[this._id],n=t.options;return n.labelSEM[e]&&!t.optionIsAttach.labelSEM[e]?et[n.labelSEM[e]._id].text:n.labelSEM[e]||""},set:Ht(t),enumerable:!0})})),Rt.prototype.setOptions=function(t){return Dt(J[this._id],t),this},Rt.prototype.position=function(){return Bt(J[this._id],{position:!0}),this},Rt.prototype.remove=function(){var e=J[this._id],n=e.curStats;Object.keys(t).forEach((function(t){n[t+="_animId"]&&X.remove(n[t])})),n.show_animId&&X.remove(n.show_animId),e.attachments.slice().forEach((function(t){Ft(e,t)})),e.baseWindow&&e.svg&&e.baseWindow.document.body.removeChild(e.svg),delete J[this._id]},Rt.prototype.show=function(t,e){return Nt(J[this._id],!0,t,e),this},Rt.prototype.hide=function(t,e){return Nt(J[this._id],!1,t,e),this},a=function(t){t&&et[t._id]&&(t.boundTargets.slice().forEach((function(e){Ft(e.props,t,!0)})),t.conf.remove&&t.conf.remove(t),delete et[t._id])},zt.prototype.remove=function(){var t=this,e=et[t._id];e&&(e.boundTargets.slice().forEach((function(t){e.conf.removeOption(e,t)})),_t((function(){var e=et[t._id];e&&(console.error("LeaderLineAttachment was not removed by removeOption"),a(e))})))},i=zt,window.LeaderLineAttachment=i,o=function(t,e){return t instanceof i&&(!(t.isRemoved||e&&et[t._id].conf.type!==e)||null)},n={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:ut}],init:function(t,e){return t.element=n.pointAnchor.checkElement(e.element),t.x=n.pointAnchor.parsePercent(e.x,!0)||[.5,!0],t.y=n.pointAnchor.parsePercent(e.y,!0)||[.5,!0],!0},removeOption:function(t,e){var o=e.props,a={},r=t.element;r===(t=o.options.anchorSE["start"===e.optionName?1:0])&&(r=t===document.body?new i(n.pointAnchor,[r]):document.body),a[e.optionName]=r,Dt(o,a)},getBBoxNest:function(t,e){var n=dt(t.element,e.baseWindow),i=n.width;return e=n.height,n.width=n.height=0,n.left=n.right=n.left+t.x[0]*(t.x[1]?i:1),n.top=n.bottom=n.top+t.y[0]*(t.y[1]?e:1),n},parsePercent:function(t,e){var n,i,o=!1;return Y(t)?i=t:"string"==typeof t&&(n=W.exec(t))&&n[2]&&(o=0!=(i=parseFloat(n[1])/100)),null!=i&&(e||0<=i)?[i,o]:null},checkElement:function(t){if(null==t)t=document.body;else if(!ut(t))throw new Error("`element` must be Element");return t}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:ut},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(t,e){var i,o=[];return t.element=n.pointAnchor.checkElement(e.element),"string"==typeof e.color&&(t.color=e.color.trim()),"string"==typeof e.fillColor&&(t.fill=e.fillColor.trim()),Y(e.size)&&0<=e.size&&(t.size=e.size),e.dash&&(t.dash=!0,Y(e.dash.len)&&0<e.dash.len&&(t.dashLen=e.dash.len),Y(e.dash.gap)&&0<e.dash.gap&&(t.dashGap=e.dash.gap)),"circle"===e.shape?t.shape=e.shape:"polygon"===e.shape&&Array.isArray(e.points)&&3<=e.points.length&&e.points.every((function(e){var i={};return!(!(i.x=n.pointAnchor.parsePercent(e[0],!0))||!(i.y=n.pointAnchor.parsePercent(e[1],!0))||(o.push(i),(i.x[1]||i.y[1])&&(t.hasRatio=!0),0))}))?(t.shape=e.shape,t.points=o):(t.shape="rect",t.radius=Y(e.radius)&&0<=e.radius?e.radius:0),"rect"!==t.shape&&"circle"!==t.shape||(t.x=n.pointAnchor.parsePercent(e.x,!0)||[-.05,!0],t.y=n.pointAnchor.parsePercent(e.y,!0)||[-.05,!0],t.width=n.pointAnchor.parsePercent(e.width)||[1.1,!0],t.height=n.pointAnchor.parsePercent(e.height)||[1.1,!0],(t.x[1]||t.y[1]||t.width[1]||t.height[1])&&(t.hasRatio=!0)),i=t.element.ownerDocument,t.svg=e=i.createElementNS(F,"svg"),e.className.baseVal=w+"-areaAnchor",e.viewBox.baseVal||e.setAttribute("viewBox","0 0 0 0"),t.path=e.appendChild(i.createElementNS(F,"path")),t.path.style.fill=t.fill||"none",t.isShown=!1,e.style.visibility="hidden",i.body.appendChild(e),Tt(i=i.defaultView),t.bodyOffset=At(i),t.updateColor=function(){var e=t.curStats,n=t.aplStats,i=t.boundTargets.length?t.boundTargets[0].props.curStats:null;e.color=i=t.color||(i?i.line_color:j.lineColor),Lt(t,n,"color",i)&&(t.path.style.stroke=i)},t.updateShow=function(){Pt(t,t.boundTargets.some((function(t){return!0===t.props.isShown})))},!0},bind:function(t,e){return e=e.props,t.color||Et(e,"cur_line_color",t.updateColor),Et(e,"svgShow",t.updateShow),_t((function(){t.updateColor(),t.updateShow()})),!0},unbind:function(t,e){e=e.props,t.color||wt(e,"cur_line_color",t.updateColor),wt(e,"svgShow",t.updateShow),1<t.boundTargets.length&&_t((function(){t.updateColor(),t.updateShow(),n.areaAnchor.update(t)&&t.boundTargets.forEach((function(t){Bt(t.props,{position:!0})}))}))},removeOption:function(t,e){n.pointAnchor.removeOption(t,e)},remove:function(t){t.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),t.boundTargets.forEach((function(e){n.areaAnchor.unbind(t,e)}))),t.svg.parentNode.removeChild(t.svg)},getStrokeWidth:function(t,e){return n.areaAnchor.update(t)&&1<t.boundTargets.length&&_t((function(){t.boundTargets.forEach((function(t){t.props!==e&&Bt(t.props,{position:!0})}))})),t.curStats.strokeWidth},getPathData:function(t,e){var n=dt(t.element,e.baseWindow);return St(t.curStats.pathListRel,(function(t){t.x+=n.left,t.y+=n.top}))},getBBoxNest:function(t,e){return e=dt(t.element,e.baseWindow),{left:(t=t.curStats.bBoxRel).left+e.left,top:t.top+e.top,right:t.right+e.left,bottom:t.bottom+e.top,width:t.width,height:t.height}},update:function(t){var e,n,i,o,a,r,s,l,u,c,h,d,p,f,m,g,y=t.curStats,v=t.aplStats,S=t.boundTargets.length?t.boundTargets[0].props.curStats:null,b={};if(b.strokeWidth=Lt(t,y,"strokeWidth",null!=t.size?t.size:S?S.line_strokeWidth:j.lineSize),e=ct(t.element),b.elementWidth=Lt(t,y,"elementWidth",e.width),b.elementHeight=Lt(t,y,"elementHeight",e.height),b.elementLeft=Lt(t,y,"elementLeft",e.left),b.elementTop=Lt(t,y,"elementTop",e.top),b.strokeWidth||t.hasRatio&&(b.elementWidth||b.elementHeight)){switch(t.shape){case"rect":(d={left:t.x[0]*(t.x[1]?e.width:1),top:t.y[0]*(t.y[1]?e.height:1),width:t.width[0]*(t.width[1]?e.width:1),height:t.height[0]*(t.height[1]?e.height:1)}).right=d.left+d.width,d.bottom=d.top+d.height,h=y.strokeWidth/2,l=(s=Math.min(d.width,d.height))?s/2*Math.SQRT2+h:0,c=(s=t.radius?t.radius<=l?t.radius:l:0)?(l=(s-h)/Math.SQRT2,c=[{x:d.left-(u=s-l),y:d.top+l},{x:d.left+l,y:d.top-u},{x:d.right-l,y:d.top-u},{x:d.right+u,y:d.top+l},{x:d.right+u,y:d.bottom-l},{x:d.right-l,y:d.bottom+u},{x:d.left+l,y:d.bottom+u},{x:d.left-u,y:d.bottom-l}],y.pathListRel=[[c[0],{x:c[0].x,y:c[0].y-(h=s*V)},{x:c[1].x-h,y:c[1].y},c[1]]],c[1].x!==c[2].x&&y.pathListRel.push([c[1],c[2]]),y.pathListRel.push([c[2],{x:c[2].x+h,y:c[2].y},{x:c[3].x,y:c[3].y-h},c[3]]),c[3].y!==c[4].y&&y.pathListRel.push([c[3],c[4]]),y.pathListRel.push([c[4],{x:c[4].x,y:c[4].y+h},{x:c[5].x+h,y:c[5].y},c[5]]),c[5].x!==c[6].x&&y.pathListRel.push([c[5],c[6]]),y.pathListRel.push([c[6],{x:c[6].x-h,y:c[6].y},{x:c[7].x,y:c[7].y+h},c[7]]),c[7].y!==c[0].y&&y.pathListRel.push([c[7],c[0]]),y.pathListRel.push([]),u=s-l+y.strokeWidth/2,[{x:d.left-u,y:d.top-u},{x:d.right+u,y:d.bottom+u}]):(u=y.strokeWidth/2,c=[{x:d.left-u,y:d.top-u},{x:d.right+u,y:d.bottom+u}],y.pathListRel=[[c[0],{x:c[1].x,y:c[0].y}],[{x:c[1].x,y:c[0].y},c[1]],[c[1],{x:c[0].x,y:c[1].y}],[]],[{x:d.left-y.strokeWidth,y:d.top-y.strokeWidth},{x:d.right+y.strokeWidth,y:d.bottom+y.strokeWidth}]),y.bBoxRel={left:c[0].x,top:c[0].y,right:c[1].x,bottom:c[1].y,width:c[1].x-c[0].x,height:c[1].y-c[0].y};break;case"circle":(r={left:t.x[0]*(t.x[1]?e.width:1),top:t.y[0]*(t.y[1]?e.height:1),width:t.width[0]*(t.width[1]?e.width:1),height:t.height[0]*(t.height[1]?e.height:1)}).width||r.height||(r.width=r.height=10),r.width||(r.width=r.height),r.height||(r.height=r.width),r.right=r.left+r.width,r.bottom=r.top+r.height,h=r.left+r.width/2,s=r.top+r.height/2,a=y.strokeWidth/2,l=r.width/2,u=r.height/2,d=l*Math.SQRT2+a,c=u*Math.SQRT2+a,y.pathListRel=[[(a=[{x:h-d,y:s},{x:h,y:s-c},{x:h+d,y:s},{x:h,y:s+c}])[0],{x:a[0].x,y:a[0].y-(h=c*V)},{x:a[1].x-(s=d*V),y:a[1].y},a[1]],[a[1],{x:a[1].x+s,y:a[1].y},{x:a[2].x,y:a[2].y-h},a[2]],[a[2],{x:a[2].x,y:a[2].y+h},{x:a[3].x+s,y:a[3].y},a[3]],[a[3],{x:a[3].x-s,y:a[3].y},{x:a[0].x,y:a[0].y+h},a[0]],[]],l=d-l+y.strokeWidth/2,u=c-u+y.strokeWidth/2,a=[{x:r.left-l,y:r.top-u},{x:r.right+l,y:r.bottom+u}],y.bBoxRel={left:a[0].x,top:a[0].y,right:a[1].x,bottom:a[1].y,width:a[1].x-a[0].x,height:a[1].y-a[0].y};break;case"polygon":t.points.forEach((function(t){var n=t.x[0]*(t.x[1]?e.width:1);t=t.y[0]*(t.y[1]?e.height:1),i?(n<i.left&&(i.left=n),n>i.right&&(i.right=n),t<i.top&&(i.top=t),t>i.bottom&&(i.bottom=t)):i={left:n,right:n,top:t,bottom:t},o?y.pathListRel.push([o,{x:n,y:t}]):y.pathListRel=[],o={x:n,y:t}})),y.pathListRel.push([]),a=y.strokeWidth/2,a=[{x:i.left-a,y:i.top-a},{x:i.right+a,y:i.bottom+a}],y.bBoxRel={left:a[0].x,top:a[0].y,right:a[1].x,bottom:a[1].y,width:a[1].x-a[0].x,height:a[1].y-a[0].y}}b.pathListRel=b.bBoxRel=!0}return(b.pathListRel||b.elementLeft||b.elementTop)&&(y.pathData=St(y.pathListRel,(function(t){t.x+=e.left,t.y+=e.top}))),Lt(t,v,"strokeWidth",n=y.strokeWidth)&&(t.path.style.strokeWidth=n+"px"),xt(n=y.pathData,v.pathData)&&(t.path.setPathData(n),v.pathData=n,b.pathData=!0),t.dash&&(!b.pathData&&(!b.strokeWidth||t.dashLen&&t.dashGap)||(y.dashLen=t.dashLen||2*y.strokeWidth,y.dashGap=t.dashGap||y.strokeWidth),b.dash=Lt(t,v,"dashLen",y.dashLen)||b.dash,b.dash=Lt(t,v,"dashGap",y.dashGap)||b.dash,b.dash&&(t.path.style.strokeDasharray=v.dashLen+","+v.dashGap)),p=y.viewBoxBBox,f=v.viewBoxBBox,m=t.svg.viewBox.baseVal,g=t.svg.style,p.x=y.bBoxRel.left+e.left,p.y=y.bBoxRel.top+e.top,p.width=y.bBoxRel.width,p.height=y.bBoxRel.height,["x","y","width","height"].forEach((function(e){(n=p[e])!==f[e]&&(m[e]=f[e]=n,g[T[e]]=n+("x"===e||"y"===e?t.bodyOffset[e]:0)+"px")})),b.strokeWidth||b.pathListRel||b.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:ut},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(t,i){var o,a,r,s,l,u,c,h,d,p=n.mouseHoverAnchor,f={};if(t.element=n.pointAnchor.checkElement(i.element),!((h=(c=t.element).ownerDocument)&&(d=h.defaultView)&&d.HTMLElement&&c instanceof d.HTMLElement))throw new Error("`element` must be HTML element");return p.style.backgroundSize=p.backgroundSize.width+"px "+p.backgroundSize.height+"px",["style","hoverStyle"].forEach((function(e){var n=p[e];t[e]=Object.keys(n).reduce((function(t,e){return t[e]=n[e],t}),{})})),"inline"===(o=t.element.ownerDocument.defaultView.getComputedStyle(t.element,"")).display?t.style.display="inline-block":"none"===o.display&&(t.style.display="block"),n.mouseHoverAnchor.dirKeys.forEach((function(e){var n=e[0];e="padding"+e[1],parseFloat(o[e])<p.padding[n]&&(t.style[e]=p.padding[n]+"px")})),t.style.display&&(r=t.element.style.display,t.element.style.display=t.style.display),n.mouseHoverAnchor.dirKeys.forEach((function(e){e="padding"+e[1],t.style[e]&&(f[e]=t.element.style[e],t.element.style[e]=t.style[e])})),(c=t.element.getBoundingClientRect()).height<p.minHeight&&(D?(d=p.minHeight,"content-box"===o.boxSizing?d-=parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth)+parseFloat(o.paddingTop)+parseFloat(o.paddingBottom):"padding-box"===o.boxSizing&&(d-=parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth)),t.style.height=d+"px"):t.style.height=parseFloat(o.height)+(p.minHeight-c.height)+"px"),t.style.backgroundPosition=z?c.width-p.backgroundSize.width-p.backgroundPosition.right+"px "+p.backgroundPosition.top+"px":"right "+p.backgroundPosition.right+"px top "+p.backgroundPosition.top+"px",t.style.display&&(t.element.style.display=r),n.mouseHoverAnchor.dirKeys.forEach((function(e){e="padding"+e[1],t.style[e]&&(t.element.style[e]=f[e])})),["style","hoverStyle"].forEach((function(e){var n=t[e],o=i[e];U(o)&&Object.keys(o).forEach((function(t){"string"==typeof o[t]||Y(o[t])?n[t]=o[t]:null==o[t]&&delete n[t]}))})),"function"==typeof i.onSwitch&&(u=i.onSwitch),i.showEffectName&&e[i.showEffectName]&&(t.showEffectName=s=i.showEffectName),l=i.animOptions,t.elmStyle=a=t.element.style,t.mouseenter=function(e){t.hoverStyleSave=p.getStyles(a,Object.keys(t.hoverStyle)),p.setStyles(a,t.hoverStyle),t.boundTargets.forEach((function(t){Nt(t.props,!0,s,l)})),u&&u(e)},t.mouseleave=function(e){p.setStyles(a,t.hoverStyleSave),t.boundTargets.forEach((function(t){Nt(t.props,!1,s,l)})),u&&u(e)},!0},bind:function(t,e){var i,o,a,r,s;return e.props.svg?n.mouseHoverAnchor.llShow(e.props,!1,t.showEffectName):_t((function(){n.mouseHoverAnchor.llShow(e.props,!1,t.showEffectName)})),t.enabled||(t.styleSave=n.mouseHoverAnchor.getStyles(t.elmStyle,Object.keys(t.style)),n.mouseHoverAnchor.setStyles(t.elmStyle,t.style),t.removeEventListener=(i=t.element,o=t.mouseenter,a=t.mouseleave,"onmouseenter"in i&&"onmouseleave"in i?(i.addEventListener("mouseenter",o,!1),i.addEventListener("mouseleave",a,!1),function(){i.removeEventListener("mouseenter",o,!1),i.removeEventListener("mouseleave",a,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),i.addEventListener("mouseover",r=function(t){t.relatedTarget&&(t.relatedTarget===this||this.compareDocumentPosition(t.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||o.apply(this,arguments)}),i.addEventListener("mouseout",s=function(t){t.relatedTarget&&(t.relatedTarget===this||this.compareDocumentPosition(t.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||a.apply(this,arguments)}),function(){i.removeEventListener("mouseover",r,!1),i.removeEventListener("mouseout",s,!1)})),t.enabled=!0),!0},unbind:function(t,e){t.enabled&&t.boundTargets.length<=1&&(t.removeEventListener(),n.mouseHoverAnchor.setStyles(t.elmStyle,t.styleSave),t.enabled=!1),n.mouseHoverAnchor.llShow(e.props,!0,t.showEffectName)},removeOption:function(t,e){n.pointAnchor.removeOption(t,e)},remove:function(t){t.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),t.boundTargets.forEach((function(e){n.mouseHoverAnchor.unbind(t,e)})))},getBBoxNest:function(t,e){return dt(t.element,e.baseWindow)},llShow:function(t,n,i){e[i||t.curStats.show_effect].stop(t,!0,n),t.aplStats.show_on=n},getStyles:function(t,e){return e.reduce((function(e,n){return e[n]=t[n],e}),{})},setStyles:function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(t,e){return"string"==typeof e.text&&(t.text=e.text.trim()),!!t.text&&("string"==typeof e.color&&(t.color=e.color.trim()),t.outlineColor="string"==typeof e.outlineColor?e.outlineColor.trim():"#fff",Array.isArray(e.offset)&&Y(e.offset[0])&&Y(e.offset[1])&&(t.offset={x:e.offset[0],y:e.offset[1]}),Y(e.lineOffset)&&(t.lineOffset=e.lineOffset),n.captionLabel.textStyleProps.forEach((function(n){null!=e[n]&&(t[n]=e[n])})),t.updateColor=function(e){n.captionLabel.updateColor(t,e)},t.updateSocketXY=function(e){var n,i=t.curStats,o=t.aplStats,a=e.curStats,r=a.position_socketXYSE[t.socketIndex];null!=r.x&&(t.offset?(i.x=r.x+t.offset.x,i.y=r.y+t.offset.y):(n=t.height/2,e=Math.max(a.attach_plugSideLenSE[t.socketIndex]||0,a.line_strokeWidth/2),a=a.position_socketXYSE[t.socketIndex?0:1],4===r.socketId||2===r.socketId?(i.x=4===r.socketId?r.x-n-t.width:r.x+n,i.y=a.y<r.y?r.y+e+n:r.y-e-n-t.height):(i.x=a.x<r.x?r.x+e+n:r.x-e-n-t.width,i.y=1===r.socketId?r.y-n-t.height:r.y+n)),Lt(t,o,"x",n=i.x)&&(t.elmPosition.x.baseVal.getItem(0).value=n),Lt(t,o,"y",n=i.y)&&(t.elmPosition.y.baseVal.getItem(0).value=n+t.height))},t.updatePath=function(e){var i=t.curStats,o=t.aplStats;(e=e.pathList.animVal||e.pathList.baseVal)&&(e=n.captionLabel.getMidPoint(e,t.lineOffset),i.x=e.x-t.width/2,i.y=e.y-t.height/2,Lt(t,o,"x",e=i.x)&&(t.elmPosition.x.baseVal.getItem(0).value=e),Lt(t,o,"y",e=i.y)&&(t.elmPosition.y.baseVal.getItem(0).value=e+t.height))},t.updateShow=function(e){n.captionLabel.updateShow(t,e)},z&&(t.adjustEdge=function(e,i){var o=t.curStats;null!=o.x&&n.captionLabel.adjustEdge(i,{x:o.x,y:o.y,width:t.width,height:t.height},t.strokeWidth/2)}),!0)},updateColor:function(t,e){var n=t.curStats,i=t.aplStats;e=e.curStats,n.color=e=t.color||e.line_color,Lt(t,i,"color",e)&&(t.styleFill.fill=e)},updateShow:function(t,e){(e=!0===e.isShown)!==t.isShown&&(t.styleShow.visibility=e?"":"hidden",t.isShown=e)},adjustEdge:function(t,e,n){(n={x1:e.x-n,y1:e.y-n,x2:e.x+e.width+n,y2:e.y+e.height+n}).x1<t.x1&&(t.x1=n.x1),n.y1<t.y1&&(t.y1=n.y1),n.x2>t.x2&&(t.x2=n.x2),n.y2>t.y2&&(t.y2=n.y2)},newText:function(t,e,n,i,o){var a,r,s=e.createElementNS(F,"text");return s.textContent=t,[s.x,s.y].forEach((function(t){var e=n.createSVGLength();e.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),t.baseVal.initialize(e)})),"boolean"!=typeof l&&(l="paintOrder"in s.style),o&&!l?(a=e.createElementNS(F,"defs"),s.id=i,a.appendChild(s),(r=(t=e.createElementNS(F,"g")).appendChild(e.createElementNS(F,"use"))).href.baseVal="#"+i,(e=t.appendChild(e.createElementNS(F,"use"))).href.baseVal="#"+i,(r=r.style).strokeLinejoin="round",{elmPosition:s,styleText:s.style,styleFill:e.style,styleStroke:r,styleShow:t.style,elmsAppend:[a,t]}):(r=s.style,o&&(r.strokeLinejoin="round",r.paintOrder="stroke"),{elmPosition:s,styleText:r,styleFill:r,styleStroke:o?r:null,styleShow:r,elmsAppend:[s]})},getMidPoint:function(t,e){var n,i,o,a=(o=bt(t)).segsLen,r=-1,s=(o=o.lenAll)/2+(e||0);if(s<=0)return 2===(n=t[0]).length?ft(n[0],n[1],0):gt(n[0],n[1],n[2],n[3],0);if(o<=s)return 2===(n=t[t.length-1]).length?ft(n[0],n[1],1):gt(n[0],n[1],n[2],n[3],1);for(i=[];s>a[++r];)i.push(t[r]),s-=a[r];return 2===(n=t[r]).length?ft(n[0],n[1],s/a[r]):gt(n[0],n[1],n[2],n[3],vt(n[0],n[1],n[2],n[3],s))},initSvg:function(t,e){var i,o,a=n.captionLabel.newText(t.text,e.baseWindow.document,e.svg,w+"-captionLabel-"+t._id,t.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach((function(e){t[e]=a[e]})),t.isShown=!1,t.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach((function(e){null!=t[e]&&(a.styleText[e]=t[e])})),a.elmsAppend.forEach((function(t){e.svg.appendChild(t)})),i=a.elmPosition.getBBox(),t.width=i.width,t.height=i.height,t.outlineColor&&(o=i.height/9,a.styleStroke.strokeWidth=(o=10<o?10:o<2?2:o)+"px",a.styleStroke.stroke=t.outlineColor),t.strokeWidth=o||0,It(t.aplStats,n.captionLabel.stats),t.updateColor(e),t.refSocketXY?t.updateSocketXY(e):t.updatePath(e),z&&Bt(e,{}),t.updateShow(e)},bind:function(t,e){var i=e.props;return t.color||Et(i,"cur_line_color",t.updateColor),(t.refSocketXY="startLabel"===e.optionName||"endLabel"===e.optionName)?(t.socketIndex="startLabel"===e.optionName?0:1,Et(i,"apl_position",t.updateSocketXY),t.offset||(Et(i,"cur_attach_plugSideLenSE",t.updateSocketXY),Et(i,"cur_line_strokeWidth",t.updateSocketXY))):Et(i,"apl_path",t.updatePath),Et(i,"svgShow",t.updateShow),z&&Et(i,"new_edge4viewBox",t.adjustEdge),n.captionLabel.initSvg(t,i),!0},unbind:function(t,e){var i=e.props;t.elmsAppend&&(t.elmsAppend.forEach((function(t){i.svg.removeChild(t)})),t.elmPosition=t.styleFill=t.styleShow=t.elmsAppend=null),It(t.curStats,n.captionLabel.stats),It(t.aplStats,n.captionLabel.stats),t.color||wt(i,"cur_line_color",t.updateColor),t.refSocketXY?(wt(i,"apl_position",t.updateSocketXY),t.offset||(wt(i,"cur_attach_plugSideLenSE",t.updateSocketXY),wt(i,"cur_line_strokeWidth",t.updateSocketXY))):wt(i,"apl_path",t.updatePath),wt(i,"svgShow",t.updateShow),z&&(wt(i,"new_edge4viewBox",t.adjustEdge),Bt(i,{}))},removeOption:function(t,e){var n=e.props,i={};i[e.optionName]="",Dt(n,i)},remove:function(t){t.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),t.boundTargets.forEach((function(e){n.captionLabel.unbind(t,e)})))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(t,e){return"string"==typeof e.text&&(t.text=e.text.trim()),!!t.text&&("string"==typeof e.color&&(t.color=e.color.trim()),t.outlineColor="string"==typeof e.outlineColor?e.outlineColor.trim():"#fff",Y(e.lineOffset)&&(t.lineOffset=e.lineOffset),n.captionLabel.textStyleProps.forEach((function(n){null!=e[n]&&(t[n]=e[n])})),t.updateColor=function(e){n.captionLabel.updateColor(t,e)},t.updatePath=function(e){var i=t.curStats,o=t.aplStats,a=e.curStats,r=e.pathList.animVal||e.pathList.baseVal;r&&(i.pathData=a=n.pathLabel.getOffsetPathData(r,a.line_strokeWidth/2+t.strokeWidth/2+t.height/4,1.25*t.height),xt(a,o.pathData)&&(t.elmPath.setPathData(a),o.pathData=a,t.bBox=t.elmPosition.getBBox(),t.updateStartOffset(e)))},t.updateStartOffset=function(e){var n,i,o=t.curStats,a=t.aplStats,r=e.curStats;o.pathData&&(2===t.semIndex&&!t.lineOffset||(i=o.pathData.reduce((function(t,e){var i,o=e.values;switch(e.type){case"M":n={x:o[0],y:o[1]};break;case"L":i={x:o[0],y:o[1]},n&&(t+=pt(n,i)),n=i;break;case"C":i={x:o[4],y:o[5]},n&&(t+=yt(n,{x:o[0],y:o[1]},{x:o[2],y:o[3]},i)),n=i}return t}),0),e=0===t.semIndex?0:1===t.semIndex?i:i/2,2!==t.semIndex&&(r=Math.max(r.attach_plugBackLenSE[t.semIndex]||0,r.line_strokeWidth/2)+t.strokeWidth/2+t.height/4,e=(e+=0===t.semIndex?r:-r)<0?0:i<e?i:e),t.lineOffset&&(e=(e+=t.lineOffset)<0?0:i<e?i:e),o.startOffset=e,Lt(t,a,"startOffset",e)&&(t.elmOffset.startOffset.baseVal.value=e)))},t.updateShow=function(e){n.captionLabel.updateShow(t,e)},z&&(t.adjustEdge=function(e,i){t.bBox&&n.captionLabel.adjustEdge(i,t.bBox,t.strokeWidth/2)}),!0)},getOffsetPathData:function(t,e,n){var i,o,a=[];function r(t,e){return Math.abs(t.x-e.x)<3&&Math.abs(t.y-e.y)<3}return t.forEach((function(t){var n,o,s,l,u,c,h,d,p,f,m;2===t.length?(d=t[0],p=t[1],f=e,m=Math.atan2(d.y-p.y,p.x-d.x)+.5*Math.PI,n=[{x:d.x+Math.cos(m)*f,y:d.y+Math.sin(m)*f*-1},{x:p.x+Math.cos(m)*f,y:p.y+Math.sin(m)*f*-1}],i?(s=i.points,0<=(h=Math.atan2(s[1].y-s[0].y,s[0].x-s[1].x)-Math.atan2(t[0].y-t[1].y,t[1].x-t[0].x))&&h<=Math.PI?o={type:"line",points:n,inside:!0}:(u=mt(s[0],s[1],e),l=mt(n[1],n[0],e),c=s[0],d=n[1],m=(p=u).x-c.x,f=p.y-c.y,h=d.x-l.x,p=d.y-l.y,d=(-f*(c.x-l.x)+m*(c.y-l.y))/(-h*f+m*p),p=(h*(c.y-l.y)-p*(c.x-l.x))/(-h*f+m*p),o=(f=0<=d&&d<=1&&0<=p&&p<=1?{x:c.x+p*m,y:c.y+p*f}:null)?{type:"line",points:[s[1]=f,n[1]]}:(s[1]=r(l,u)?l:u,{type:"line",points:[l,n[1]]}),i.len=pt(s[0],s[1]))):o={type:"line",points:n},o.len=pt(o.points[0],o.points[1]),a.push(i=o)):(a.push({type:"cubic",points:function(t,e,n,i,o,a){for(var r,s,l=yt(t,e,n,i)/16,u=1/(16<o?o/16*l:l),c=[],h=0;s=(90-(r=gt(t,e,n,i,h)).angle)*(Math.PI/180),c.push({x:r.x+Math.cos(s)*o,y:r.y+Math.sin(s)*o*-1}),!(1<=h);)1<(h+=u)&&(h=1);return c}(t[0],t[1],t[2],t[3],e)}),i=null)})),i=null,a.forEach((function(t){var o;i="line"===t.type?(t.inside&&(i.len>e?((o=i.points)[1]=mt(o[0],o[1],-e),i.len=pt(o[0],o[1])):(i.points=null,i.len=0),t.len>e+n?((o=t.points)[0]=mt(o[1],o[0],-(e+n)),t.len=pt(o[0],o[1])):(t.points=null,t.len=0)),t):null})),a.reduce((function(t,e){var n=e.points;return n&&(o&&r(n[0],o)||t.push({type:"M",values:[n[0].x,n[0].y]}),"line"===e.type?t.push({type:"L",values:[n[1].x,n[1].y]}):(n.shift(),n.forEach((function(e){t.push({type:"L",values:[e.x,e.y]})}))),o=n[n.length-1]),t}),[])},newText:function(t,e,n,i){var o,a,r,s,u=e.createElementNS(F,"defs"),c=u.appendChild(e.createElementNS(F,"path"));return c.id=o=n+"-path",(r=(a=e.createElementNS(F,"text")).appendChild(e.createElementNS(F,"textPath"))).href.baseVal="#"+o,r.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),r.textContent=t,"boolean"!=typeof l&&(l="paintOrder"in a.style),i&&!l?(a.id=t=n+"-text",u.appendChild(a),(s=(n=e.createElementNS(F,"g")).appendChild(e.createElementNS(F,"use"))).href.baseVal="#"+t,(e=n.appendChild(e.createElementNS(F,"use"))).href.baseVal="#"+t,(s=s.style).strokeLinejoin="round",{elmPosition:a,elmPath:c,elmOffset:r,styleText:a.style,styleFill:e.style,styleStroke:s,styleShow:n.style,elmsAppend:[u,n]}):(s=a.style,i&&(s.strokeLinejoin="round",s.paintOrder="stroke"),{elmPosition:a,elmPath:c,elmOffset:r,styleText:s,styleFill:s,styleStroke:i?s:null,styleShow:s,elmsAppend:[u,a]})},initSvg:function(t,e){var i,o,a,r=n.pathLabel.newText(t.text,e.baseWindow.document,w+"-pathLabel-"+t._id,t.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach((function(e){t[e]=r[e]})),t.isShown=!1,t.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach((function(e){null!=t[e]&&(r.styleText[e]=t[e])})),r.elmsAppend.forEach((function(t){e.svg.appendChild(t)})),r.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),H&&(a=r.elmOffset.href.baseVal,r.elmOffset.href.baseVal=""),i=r.elmPosition.getBBox(),H&&(r.elmOffset.href.baseVal=a),r.styleText.textAnchor=["start","end","middle"][t.semIndex],2!==t.semIndex||t.lineOffset||r.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),t.height=i.height,t.outlineColor&&(o=i.height/9,r.styleStroke.strokeWidth=(o=10<o?10:o<2?2:o)+"px",r.styleStroke.stroke=t.outlineColor),t.strokeWidth=o||0,It(t.aplStats,n.pathLabel.stats),t.updateColor(e),t.updatePath(e),t.updateStartOffset(e),z&&Bt(e,{}),t.updateShow(e)},bind:function(t,e){var i=e.props;return t.color||Et(i,"cur_line_color",t.updateColor),Et(i,"cur_line_strokeWidth",t.updatePath),Et(i,"apl_path",t.updatePath),t.semIndex="startLabel"===e.optionName?0:"endLabel"===e.optionName?1:2,2===t.semIndex&&!t.lineOffset||Et(i,"cur_attach_plugBackLenSE",t.updateStartOffset),Et(i,"svgShow",t.updateShow),z&&Et(i,"new_edge4viewBox",t.adjustEdge),n.pathLabel.initSvg(t,i),!0},unbind:function(t,e){var i=e.props;t.elmsAppend&&(t.elmsAppend.forEach((function(t){i.svg.removeChild(t)})),t.elmPosition=t.elmPath=t.elmOffset=t.styleFill=t.styleShow=t.elmsAppend=null),It(t.curStats,n.pathLabel.stats),It(t.aplStats,n.pathLabel.stats),t.color||wt(i,"cur_line_color",t.updateColor),wt(i,"cur_line_strokeWidth",t.updatePath),wt(i,"apl_path",t.updatePath),2===t.semIndex&&!t.lineOffset||wt(i,"cur_attach_plugBackLenSE",t.updateStartOffset),wt(i,"svgShow",t.updateShow),z&&(wt(i,"new_edge4viewBox",t.adjustEdge),Bt(i,{}))},removeOption:function(t,e){var n=e.props,i={};i[e.optionName]="",Dt(n,i)},remove:function(t){t.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),t.boundTargets.forEach((function(e){n.pathLabel.unbind(t,e)})))}}},Object.keys(n).forEach((function(t){Rt[t]=function(){return new i(n[t],Array.prototype.slice.call(arguments))}})),Rt.positionByWindowResize=!0,window.addEventListener("resize",$.add((function(){Rt.positionByWindowResize&&Object.keys(J).forEach((function(t){Bt(J[t],{position:!0})}))})),!1)}()}));var x={},E=class extends HTMLElement{init(t,e){this.classList.add(x.decoy)}};customElements.define("dt-decoy",E);var w,_,k,C,O,M,I,L,A={},T={},P=class extends HTMLElement{constructor(t,e){super(),w.set(this,void 0),_.set(this,void 0),k.set(this,void 0),C.set(this,void 0),O.set(this,void 0),M.set(this,void 0),this.workarea=null,this.behaviorEditor=null,this.behavior=null,this.behaviorCompiled=null,this.x=0,this.y=0,this.hasBehavior=!1,this.hasIo=!0,a(this,w,!1),a(this,_,null),a(this,k,null),a(this,C,null),this.inputs=new Array,this.outputs=new Array,a(this,O,null),a(this,M,null),this.typeIdentifier=t,this.nodeId=P.makeId(t),this.name=e}get selected(){return o(this,w)}set selected(t){t?this.select():this.deselect()}get titleElement(){return o(this,_)}set titleElement(t){a(this,_,t)}get editElement(){return o(this,k)}set editElement(t){a(this,k,t)}get deleteElement(){return o(this,C)}set deleteElement(t){a(this,C,t)}connectedCallback(){this.workarea=this.parentElement,this.classList.add(T.node),this.titleElement=document.createElement("title"),this.titleElement.classList.add(T.title),this.titleElement.textContent=this.name,this.titleElement.title=this.nodeId,this.titleElement.addEventListener("click",(t=>this.onClickTitle(t))),this.appendChild(this.titleElement),this.hasBehavior&&(this.editElement=document.createElement("button"),this.editElement.classList.add(T.edit),this.editElement.textContent="",this.editElement.addEventListener("click",(t=>this.onClickEdit(t))),this.appendChild(this.editElement)),this.deleteElement=document.createElement("button"),this.deleteElement.classList.add(T.delete),this.deleteElement.textContent="",this.deleteElement.addEventListener("click",(t=>this.onClickDelete(t))),this.appendChild(this.deleteElement),this.hasIo&&(a(this,O,document.createElement("div")),o(this,O).classList.add(T.inputSection),this.appendChild(o(this,O)),a(this,M,document.createElement("div")),o(this,M).classList.add(T.outputSection),this.appendChild(o(this,M)))}init(t){if(this.nodeId=t?.id??this.nodeId,this.name=t?.name??this.name,this.x=t?.x??this.x,this.y=t?.y??this.y,t){for(let e=0;e<t.inputs.length;++e)this.inputs[e].init(t.inputs[e]);for(let e=0;e<t.outputs.length;++e)this.outputs[e].init(t.outputs[e])}if(t?.behavior){for(let e=0;e<t.behavior.metadata.inputs.length;++e)this.inputs[e].label=u(t?.behavior?.metadata.inputs[e].label);for(let e=0;e<t.behavior.metadata.outputs.length;++e)this.outputs[e].label=u(t?.behavior?.metadata.outputs[e].label);this.behavior=y.fromCodeFragment(t.behavior.script,new m(this.name,t.behavior.metadata.inputs,t.behavior.metadata.outputs))}}initConnectionFrom(t,e){u(this.workarea).initConnectionFrom(t,e)}finalizeConnection(t){u(this.workarea).finalizeConnection(t)}onConnect(t){this.update(),this.updateUi()}onClickTitle(t){t.ctrlKey&&(o(this,w)?this.deselect():this.select())}onClickEdit(t){u(this.workarea).editNodeBehavior(this,t)}onClickDelete(t){u(this.workarea).deleteNode(this)}select(t){o(this,w)||(this.classList.add(T.selected),a(this,w,!0),this.workarea?.onNodeSelect(this,t))}deselect(t){o(this,w)&&(this.classList.remove(T.selected),a(this,w,!1),this.workarea?.onNodeDeselect(this,t))}async update(){console.debug(`Updating ${this.nodeId}...`);for(const t of this.inputs)t.update();if(this.behaviorCompiled){console.debug("  Executing compiled behavior...");try{await this.behaviorCompiled()}catch(t){console.error(`  Execution of ${this.nodeId} failed!`,t)}}}updateUi(t){u(this.titleElement).textContent=this.name,u(this.titleElement).title=this.nodeId,this.x=t?.x??this.x,this.y=t?.y??this.y;for(const t of this.inputs)t.updateUi();for(const t of this.outputs)t.updateUi();this.behaviorEditor&&this.behaviorEditor.updateUi()}updateBehavior(t=this.behavior){if(this.behavior=t,null===this.behavior)return void(this.behaviorCompiled=null);const e=this.behavior.toExecutableBehavior();this.rebuildFromMetadata(),this.behaviorCompiled=new Function(e).bind(this),this.update()}addInput(t){const e=document.createElement("dt-input");return u(o(this,O)).appendChild(e),e.init(t),this.inputs.push(e),e}removeInput(t){const e=u(this.workarea);u(o(this,O)).removeChild(t),t.output&&e.disconnect(t.output),this.inputs.splice(this.inputs.indexOf(t),1)}addOutput(t){const e=document.createElement("dt-output");return u(o(this,M)).appendChild(e),e.init(t),this.outputs.push(e),e}removeOutput(t){const e=u(this.workarea);u(o(this,M)).removeChild(t);for(const n of t.inputs)e.disconnect(n);this.outputs.splice(this.outputs.indexOf(t),1)}rebuildFromMetadata(){const t=u(this.behavior);this.name=t.metadata.title;const e=this.inputs.length-t.metadata.inputs.length,n=this.inputs.splice(t.metadata.inputs.length,e);for(let e=0;e<t.metadata.inputs.length;++e)this.inputs.length<=e&&this.addInput(),this.inputs[e].label=t.metadata.inputs[e].label;n.forEach((t=>this.removeInput(t)));const i=this.outputs.length-t.metadata.outputs.length,o=this.outputs.splice(t.metadata.inputs.length,e);for(let e=0;e<t.metadata.outputs.length;++e)this.outputs.length<=e&&this.addOutput(),this.outputs[e].label=t.metadata.outputs[e].label;o.forEach((t=>this.removeOutput(t))),this.outputs.splice(t.metadata.outputs.length,i)}serialize(){const t={type:this.typeIdentifier,id:u(this.nodeId),name:this.name,x:this.x,y:this.y,inputs:this.inputs.map((t=>({id:u(t.columnId),output:t.output?u(t.output.source.columnId):null}))),outputs:this.outputs.map((t=>({id:u(t.columnId),inputs:t.inputs.map((t=>u(t.target.columnId)))})))};return this.behavior&&(t.behavior={metadata:{inputs:this.behavior.metadata.inputs,outputs:this.behavior.metadata.outputs},script:this.behavior.toCodeFragment()}),t}static makeId(t){return`${t}-${((t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=63&n[t];e+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return e})(6)}`}},B=P;w=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,O=new WeakMap,M=new WeakMap,customElements.define("dt-input",class extends S{constructor(){super(),this.columnId=B.makeId("input"),this.label="<unlabled input>"}connectedCallback(){super.connectedCallback(),this.classList.add(A.input),this.addEventListener("mouseup",(t=>this.onMouseUp(t)))}connect(t){this.output&&this.output.disconnect(),this.output=t,this.update(),super.connect(t),console.log(`${t.source.parent?.nodeId}::${t.source.columnId}  ${this.parent?.nodeId}::${this.columnId}`)}disconnect(t){super.disconnect(t),this.output=void 0,this.value=void 0,this.parent?.update()}update(){s(this.output)||(this.value=this.output.source.value)}updateUi(){super.updateUi(),this.output&&this.output.line.position()}onMouseEnter(t){s(this.output)||(this.output.line.dash={animation:!0})}onMouseLeave(t){s(this.output)||(this.output.line.dash=!1)}onMouseUp(t){this.output&&this.parent?.workarea?.disconnect(this.output),this.parent?.finalizeConnection(this),this.update()}});var V,N=class extends B{constructor(){super("_editor","Behavior Editor"),I.set(this,void 0),L.set(this,void 0),a(this,I,null),a(this,L,null),this.target=null,this.line=null,this.hasIo=!1}get behaviorSource(){return o(this,I)?.value??""}connectedCallback(){super.connectedCallback(),a(this,I,document.createElement("textarea")),o(this,I).setAttribute("spellcheck","false"),this.appendChild(o(this,I)),a(this,L,new ResizeObserver((()=>{this.workarea?.onNodeResize(this)}))),o(this,L).observe(o(this,I))}disconnectedCallback(){o(this,L)?.disconnect(),a(this,L,null)}editNodeBehavior(t){this.target=t,t.behaviorEditor=this,this.name=`Behavior Editor for ${this.target.nodeId}`,u(o(this,I)).value=t.behavior?.toEditableScript()??""}onClickDelete(t){this.behaviorSource!==this.target?.behavior?.toEditableScript()&&window.confirm("Apply new behavior?")?this.workarea?.closeBehaviorEditor(u(this.target)):super.onClickDelete(t)}init(t){super.init(t),this.updateUi()}updateUi(t){super.updateUi(t),this.line&&this.line.position()}serialize(){throw new Error("Node can not be serialized.")}};function W(t,e,n){var i=function(){var i=2091639*t+2.3283064365386963e-10*n;return t=e,e=i-(n=0|i)};return i.getState=function(){return[t,e,n]},i.nextFloat=F,i.nextInt=D,i}function F(t,e){var n,i,o=this();if("number"==typeof e)n=t,i=e;else{if("number"!=typeof t)return o;n=0,i=t}return n+o*(i-n)}function D(t,e){return Math.floor(this.nextFloat(t,e))}function R(t){var e,n,i,o,a=4022871197;t="X"+(t||+new Date);for(var r=0;r<2;r++){for(var s=0;s<t.length;s++)i=.02519603282416938*(a+=t.charCodeAt(s)),i-=a=i>>>0,a=(i*=a)>>>0,a+=4294967296*(i-=a);o=2.3283064365386963e-10*(a>>>0),0===r?e=o:n=o}return W(e,n,1)}I=new WeakMap,L=new WeakMap,customElements.define("dt-node-editor",N),customElements.define("dt-node-noop",class extends B{constructor(){super("noop","Noop")}connectedCallback(){super.connectedCallback(),this.addInput()}init(t){super.init(t),this.inputs[0].init(t?.inputs[0]),this.updateUi()}serialize(){return{type:"noop",id:u(this.nodeId),name:this.name,x:this.x,y:this.y,inputs:this.inputs.map((t=>({id:u(t.columnId),output:t.output?u(t.output.source.columnId):null}))),outputs:this.outputs.map((t=>({id:u(t.columnId),inputs:t.inputs.map((t=>u(t.target.columnId)))})))}}}),V=new WeakMap,customElements.define("dt-node-row",class extends B{constructor(){super("row","Row"),V.set(this,void 0),a(this,V,new Array),this.hasBehavior=!0}connectedCallback(){super.connectedCallback(),this.updateBehavior(y.fromCodeFragment("\nwhile(this.outputs.length < 5) { \n  const output = this.addOutput();\n  output.label = `Output ${this.outputs.length}`;\n  output.value = this.outputs.length * 2;\n}\n",new m("Row",[],[]))),this.rebuildFromMetadata()}rebuildFromMetadata(){const t=u(this.behavior);this.name=t.metadata.title}}),customElements.define("dt-node-script",class extends B{constructor(){super("script","Script"),this.hasBehavior=!0}connectedCallback(){super.connectedCallback(),this.updateBehavior(y.fromCodeFragment("sum = Number(a) + Number(b);",new m("Sum",[{identifier:"a",label:"A"},{identifier:"b",label:"B"}],[{identifier:"sum",label:"Sum"}]))),this.rebuildFromMetadata()}init(t){super.init(t),this.updateUi()}}),R.fromState=function(t){return W.apply(null,t)};var H=R;customElements.define("dt-node-seed",class extends B{constructor(){super("seed","Seed"),this.hasBehavior=!0,this.random=H(this.nodeId)}connectedCallback(){super.connectedCallback(),this.updateBehavior(y.fromCodeFragment("float = this.random();\nint = this.random.nextInt(256);",new m("Seed",[],[{identifier:"float",label:"Float"},{identifier:"int",label:"Integer"}]))),this.rebuildFromMetadata()}init(t){super.init(t),this.random=H(u(this.nodeId)),this.updateUi()}});var z={};customElements.define("dt-output",class extends S{constructor(){super(),this.inputs=new Array,this.columnId=B.makeId("output"),this.label="<unlabled output>"}connectedCallback(){super.connectedCallback(),this.classList.add(z.output),this.addEventListener("mousedown",(t=>this.onMouseDown(t)))}connect(t){this.inputs.push(t),super.connect(t)}disconnect(t){this.inputs.splice(this.inputs.indexOf(t),1),super.disconnect(t)}onMouseEnter(t){for(const t of this.inputs)t.line.dash={animation:!0}}onMouseLeave(t){for(const t of this.inputs)t.line.dash=!1}onMouseDown(t){this.parent&&0===t.button&&(console.log(`Begin sending output from ${this.parent.name}...`),this.parent.initConnectionFrom(this,t))}updateUi(){super.updateUi();for(const t of this.inputs)t.line.position()}});var G,j={},U=class extends HTMLElement{constructor(){super(),G.set(this,void 0),a(this,G,null),console.debug("Scrollable constructed.")}connectedCallback(){a(this,G,this.querySelector("dt-workarea")),this.classList.add(j.scrollable),this.addEventListener("scroll",(t=>this.onScroll(t))),console.debug("Scrollable connected."),this.waitForWorkarea().catch(console.error)}async waitForWorkarea(){await customElements.whenDefined("dt-workarea"),u(o(this,G)).registerScrollableContainer(this),this.scroll(this.scrollHeight/3,this.scrollWidth/3)}onScroll(t){o(this,G)&&o(this,G).updateConnections()}};G=new WeakMap,customElements.define("dt-scrollable",U);var Y,X={},$=class extends HTMLElement{constructor(){super(),Y.set(this,void 0),a(this,Y,null),console.debug("Toolbar constructed.")}connectedCallback(){this.classList.add(X.toolbar);const t=this.getAttribute("for");if(s(t))throw new Error("Missing `for` attribute on dt-toolbar. Requires an ID of a dt-workarea.");a(this,Y,u(document.getElementById(t)));const e=document.createElement("button");e.classList.add(X.button),e.textContent=" Row",e.title="4",e.addEventListener("click",(()=>u(o(this,Y)).createNode("row"))),this.appendChild(e);const n=document.createElement("button");n.classList.add(X.button),n.textContent=" Seed",n.title="1",n.addEventListener("click",(()=>u(o(this,Y)).createNode("seed"))),this.appendChild(n);const i=document.createElement("button");i.classList.add(X.button),i.textContent=" Noop",i.title="2",i.addEventListener("click",(()=>u(o(this,Y)).createNode("noop"))),this.appendChild(i);const r=document.createElement("button");r.classList.add(X.button),r.textContent=" Script",r.title="3",r.addEventListener("click",(()=>u(o(this,Y)).createNode("script"))),this.appendChild(r);const l=document.createElement("span");l.classList.add(X.divider),this.appendChild(l);const c=document.createElement("button");c.classList.add(X.button),c.textContent=" Delete",c.title="D",c.addEventListener("click",(()=>u(o(this,Y)).deleteSelectedNodes())),this.appendChild(c);const h=document.createElement("button");h.classList.add(X.button),h.textContent=" Clear",h.title="X",h.addEventListener("click",(()=>u(o(this,Y)).clear())),this.appendChild(h);const d=document.createElement("span");d.classList.add(X.divider),this.appendChild(d);const p=document.createElement("button");p.classList.add(X.button),p.textContent=" Export",p.title="E",p.addEventListener("click",(()=>u(o(this,Y)).export())),this.appendChild(p);const f=document.createElement("button");f.classList.add(X.button),f.textContent=" Restore snapshot",f.title="R",f.addEventListener("click",(()=>u(o(this,Y)).restoreSnapshot())),this.appendChild(f);const m=document.createElement("button");m.classList.add(X.button),m.textContent=" Demo",m.addEventListener("click",(()=>u(o(this,Y)).restoreSnapshotDemo())),this.appendChild(m);const g=document.createElement("button");g.classList.add(X.button),g.textContent=" Execute",g.addEventListener("click",(()=>u(o(this,Y)).execute())),this.appendChild(g),console.debug("Toolbar connected.")}};Y=new WeakMap,customElements.define("dt-toolbar",$);var Z,q=b((function(t){var e=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function o(t,e){if(!i[t]){i[t]={};for(var n=0;n<t.length;n++)i[t][t.charAt(n)]=n}return i[t][e]}var a={compressToBase64:function(t){if(null==t)return"";var n=a._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,(function(n){return o(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":a._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:a._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=a.compress(t),n=new Uint8Array(2*e.length),i=0,o=e.length;i<o;i++){var r=e.charCodeAt(i);n[2*i]=r>>>8,n[2*i+1]=r%256}return n},decompressFromUint8Array:function(e){if(null==e)return a.decompress(e);for(var n=new Array(e.length/2),i=0,o=n.length;i<o;i++)n[i]=256*e[2*i]+e[2*i+1];var r=[];return n.forEach((function(e){r.push(t(e))})),a.decompress(r.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":a._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,(function(e){return o(n,t.charAt(e))})))},compress:function(e){return a._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var i,o,a,r={},s={},l="",u="",c="",h=2,d=3,p=2,f=[],m=0,g=0;for(a=0;a<t.length;a+=1)if(l=t.charAt(a),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=d++,s[l]=!0),u=c+l,Object.prototype.hasOwnProperty.call(r,u))c=u;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(i=0;i<p;i++)m<<=1,g==e-1?(g=0,f.push(n(m)),m=0):g++;for(o=c.charCodeAt(0),i=0;i<8;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1}else{for(o=1,i=0;i<p;i++)m=m<<1|o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o=0;for(o=c.charCodeAt(0),i=0;i<16;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1}0==--h&&(h=Math.pow(2,p),p++),delete s[c]}else for(o=r[c],i=0;i<p;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1;0==--h&&(h=Math.pow(2,p),p++),r[u]=d++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(i=0;i<p;i++)m<<=1,g==e-1?(g=0,f.push(n(m)),m=0):g++;for(o=c.charCodeAt(0),i=0;i<8;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1}else{for(o=1,i=0;i<p;i++)m=m<<1|o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o=0;for(o=c.charCodeAt(0),i=0;i<16;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1}0==--h&&(h=Math.pow(2,p),p++),delete s[c]}else for(o=r[c],i=0;i<p;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(o=2,i=0;i<p;i++)m=m<<1|1&o,g==e-1?(g=0,f.push(n(m)),m=0):g++,o>>=1;for(;;){if(m<<=1,g==e-1){f.push(n(m));break}g++}return f.join("")},decompress:function(t){return null==t?"":""==t?null:a._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,i){var o,a,r,s,l,u,c,h=[],d=4,p=4,f=3,m="",g=[],y={val:i(0),position:n,index:1};for(o=0;o<3;o+=1)h[o]=o;for(r=0,l=Math.pow(2,2),u=1;u!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),r|=(s>0?1:0)*u,u<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),u=1;u!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),r|=(s>0?1:0)*u,u<<=1;c=t(r);break;case 1:for(r=0,l=Math.pow(2,16),u=1;u!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),r|=(s>0?1:0)*u,u<<=1;c=t(r);break;case 2:return""}for(h[3]=c,a=c,g.push(c);;){if(y.index>e)return"";for(r=0,l=Math.pow(2,f),u=1;u!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),r|=(s>0?1:0)*u,u<<=1;switch(c=r){case 0:for(r=0,l=Math.pow(2,8),u=1;u!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),r|=(s>0?1:0)*u,u<<=1;h[p++]=t(r),c=p-1,d--;break;case 1:for(r=0,l=Math.pow(2,16),u=1;u!=l;)s=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=i(y.index++)),r|=(s>0?1:0)*u,u<<=1;h[p++]=t(r),c=p-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,f),f++),h[c])m=h[c];else{if(c!==p)return null;m=a+a.charAt(0)}g.push(m),h[p++]=a+m.charAt(0),a=m,0==--d&&(d=Math.pow(2,f),f++)}}};return a}();null!=t&&(t.exports=e)})),K=[],Q=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16.666666666666668)},J=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)},tt=Date.now();function et(){var t,e;Z&&(J.call(window,Z),Z=null),K.forEach((function(e){var n;(n=e.event)&&(e.event=null,e.listener(n),t=!0)})),t?(tt=Date.now(),e=!0):Date.now()-tt<500&&(e=!0),e&&(Z=Q.call(window,et))}var nt=function(t){var e;return-1===function(t){var e=-1;return K.some((function(n,i){return n.listener===t&&(e=i,!0)})),e}(t)?(K.push(e={listener:t}),function(t){e.event=t,Z||et()}):null};function it(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ot=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){ot=!0}}))}catch(t){}function at(t,e,n,i){t.addEventListener(e,n,ot?i:i.capture)}function rt(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(t[n].identifier===e)return t[n];return null}function st(t){return t&&"number"==typeof t.clientX&&"number"==typeof t.clientY}function lt(t){t.preventDefault()}var ut=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.startHandlers={},this.lastHandlerId=0,this.curPointerClass=null,this.curTouchId=null,this.lastPointerXY={clientX:0,clientY:0},this.lastTouchTime=0,this.options={preventDefault:!0,stopPropagation:!0},e&&["preventDefault","stopPropagation"].forEach((function(t){"boolean"==typeof e[t]&&(n.options[t]=e[t])}))}var e,n,i;return e=t,i=[{key:"addEventListenerWithOptions",get:function(){return at}}],(n=[{key:"regStartHandler",value:function(t){var e=this;return e.startHandlers[++e.lastHandlerId]=function(n){var i,o,a="mousedown"===n.type?"mouse":"touch",r=Date.now();if("touch"===a)e.lastTouchTime=r,i=n.changedTouches[0],o=n.changedTouches[0].identifier;else{if(r-e.lastTouchTime<400)return;i=n}if(!st(i))throw new Error("No clientX/clientY");e.curPointerClass&&e.cancel(),t.call(e,i)&&(e.curPointerClass=a,e.curTouchId="touch"===a?o:null,e.lastPointerXY.clientX=i.clientX,e.lastPointerXY.clientY=i.clientY,e.options.preventDefault&&n.preventDefault(),e.options.stopPropagation&&n.stopPropagation())},e.lastHandlerId}},{key:"unregStartHandler",value:function(t){delete this.startHandlers[t]}},{key:"addStartHandler",value:function(t,e){if(!this.startHandlers[e])throw new Error("Invalid handlerId: ".concat(e));return at(t,"mousedown",this.startHandlers[e],{capture:!1,passive:!1}),at(t,"touchstart",this.startHandlers[e],{capture:!1,passive:!1}),at(t,"dragstart",lt,{capture:!1,passive:!1}),e}},{key:"removeStartHandler",value:function(t,e){if(!this.startHandlers[e])throw new Error("Invalid handlerId: ".concat(e));return t.removeEventListener("mousedown",this.startHandlers[e],!1),t.removeEventListener("touchstart",this.startHandlers[e],!1),t.removeEventListener("dragstart",lt,!1),e}},{key:"addMoveHandler",value:function(t,e,n){var i=this;function o(t){var e="mousemove"===t.type?"mouse":"touch";if("touch"===e&&(i.lastTouchTime=Date.now()),e===i.curPointerClass){var n="touch"===e?rt(t.changedTouches,i.curTouchId):t;st(n)&&(n.clientX===i.lastPointerXY.clientX&&n.clientY===i.lastPointerXY.clientY||i.move(n),i.options.preventDefault&&t.preventDefault(),i.options.stopPropagation&&t.stopPropagation())}}var a=n?o:nt(o);at(t,"mousemove",a,{capture:!1,passive:!1}),at(t,"touchmove",a,{capture:!1,passive:!1}),i.curMoveHandler=e}},{key:"move",value:function(t){st(t)&&(this.lastPointerXY.clientX=t.clientX,this.lastPointerXY.clientY=t.clientY),this.curMoveHandler&&this.curMoveHandler(this.lastPointerXY)}},{key:"addEndHandler",value:function(t,e){var n=this;function i(t){var e="mouseup"===t.type?"mouse":"touch";if("touch"===e&&(n.lastTouchTime=Date.now()),e===n.curPointerClass){var i="touch"===e?rt(t.changedTouches,n.curTouchId)||(rt(t.touches,n.curTouchId)?null:{}):t;i&&(n.end(i),n.options.preventDefault&&t.preventDefault(),n.options.stopPropagation&&t.stopPropagation())}}at(t,"mouseup",i,{capture:!1,passive:!1}),at(t,"touchend",i,{capture:!1,passive:!1}),n.curEndHandler=e}},{key:"end",value:function(t){st(t)&&(this.lastPointerXY.clientX=t.clientX,this.lastPointerXY.clientY=t.clientY),this.curEndHandler&&this.curEndHandler(this.lastPointerXY),this.curPointerClass=this.curTouchId=null}},{key:"addCancelHandler",value:function(t,e){var n=this;at(t,"touchcancel",(function(t){n.lastTouchTime=Date.now(),null!=n.curPointerClass&&(rt(t.changedTouches,n.curTouchId)||!rt(t.touches,n.curTouchId))&&n.cancel()}),{capture:!1,passive:!1}),n.curCancelHandler=e}},{key:"cancel",value:function(){this.curCancelHandler&&this.curCancelHandler(),this.curPointerClass=this.curTouchId=null}}])&&it(e.prototype,n),i&&it(e,i),t}();function ct(t){return t.substr(0,1).toUpperCase()+t.substr(1)}var ht,dt,pt,ft,mt=["webkit","moz","ms","o"],gt=mt.reduce((function(t,e){return t.push(e),t.push(ct(e)),t}),[]),yt=mt.map((function(t){return"-".concat(t,"-")})),vt=function(){return ht=ht||document.createElement("div").style},St=(dt=new RegExp("^(?:"+mt.join("|")+")(.)","i"),pt=/[A-Z]/,function(t){return"float"===(t=(t+"").replace(/\s/g,"").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()})).replace(dt,(function(t,e){return pt.test(e)?e.toLowerCase():t}))).toLowerCase()?"cssFloat":t}),bt=(ft=new RegExp("^(?:"+yt.join("|")+")","i"),function(t){return(null!=t?t+"":"").replace(/\s/g,"").replace(ft,"")}),xt=function(t,e){var n=vt();return t=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),n.setProperty(t,e),null!=n[t]&&n.getPropertyValue(t)===e},Et={},wt={};function _t(t){if((t=St(t))&&null==Et[t]){var e=vt();if(null!=e[t])Et[t]=t;else{var n=ct(t);gt.some((function(i){var o=i+n;return null!=e[o]&&(Et[t]=o,!0)}))||(Et[t]=!1)}}return Et[t]||void 0}var kt={getName:_t,getValue:function(t,e){var n;return(t=_t(t))?(wt[t]=wt[t]||{},(Array.isArray(e)?e:[e]).some((function(e){return e=bt(e),null!=wt[t][e]?!1!==wt[t][e]&&(n=wt[t][e],!0):xt(t,e)?(n=wt[t][e]=e,!0):!!yt.some((function(i){var o=i+e;return!!xt(t,o)&&(n=wt[t][e]=o,!0)}))||(wt[t][e]=!1,!1)})),"string"==typeof n?n:void 0):n}};function Ct(t){return(t+"").trim()}function Ot(t,e){e.setAttribute("class",t.join(" "))}function Mt(t,e,n){n.filter((function(e){return!(!(e=Ct(e))||-1!==t.indexOf(e)||(t.push(e),0))})).length&&Ot(t,e)}function It(t,e,n){n.filter((function(e){var n;return!(!(e=Ct(e))||-1===(n=t.indexOf(e))||(t.splice(n,1),0))})).length&&Ot(t,e)}function Lt(t){return!Lt.ignoreNative&&t.classList||(e=(t.getAttribute("class")||"").trim().split(/\s+/).filter((function(t){return!!t})),n={length:e.length,item:function(t){return e[t]},contains:function(t){return-1!==e.indexOf(Ct(t))},add:function(){return Mt(e,t,Array.prototype.slice.call(arguments)),Lt.methodChain?n:void 0},remove:function(){return It(e,t,Array.prototype.slice.call(arguments)),Lt.methodChain?n:void 0},toggle:function(n,i){return function(t,e,n,i){var o=t.indexOf(n=Ct(n));return-1!==o?!!i||(t.splice(o,1),Ot(t,e),!1):!1!==i&&(t.push(n),Ot(t,e),!0)}(e,t,n,i)},replace:function(i,o){return function(t,e,n,i){var o;(n=Ct(n))&&(i=Ct(i))&&n!==i&&-1!==(o=t.indexOf(n))&&(t.splice(o,1),-1===t.indexOf(i)&&t.push(i),Ot(t,e))}(e,t,i,o),Lt.methodChain?n:void 0}},n);var e,n}function At(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Lt.methodChain=!0,Lt.ignoreNative=!0;var Pt,Bt,Vt,Nt,Wt,Ft,Dt,Rt,Ht,zt,Gt,jt,Ut,Yt,Xt,$t,Zt,qt=["tl","tr","bl","br"],Kt=["start","end"],Qt=["inside","outside"],Jt=[40,200,1e3],te=[100,40,0],ee="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,ne=!ee&&!!document.uniqueID,ie="MozAppearance"in document.documentElement.style,oe=!(ee||ie||!window.chrome||!window.CSS),ae=!(ee||ne||ie||oe||window.chrome||!("WebkitAppearance"in document.documentElement.style)),re=(Pt={}.toString,Bt={}.hasOwnProperty.toString,Vt=Bt.call(Object),function(t){var e,n;return t&&"[object Object]"===Pt.call(t)&&(!(e=Object.getPrototypeOf(t))||(n=e.hasOwnProperty("constructor")&&e.constructor)&&"function"==typeof n&&Bt.call(n)===Vt)}),se=Number.isFinite||function(t){return"number"==typeof t&&window.isFinite(t)},le={},ue={},ce=new ut,he=0,de=ae?["all-scroll","move"]:["grab","all-scroll","move"],pe=ae?"move":["grabbing","move"],fe="plain-draggable",me="plain-draggable-dragging",ge="plain-draggable-moving",ye={},ve=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16.666666666666668)},Se=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)};{let t=function(){var t=Date.now();["x","y"].forEach((function(e){var n=Yt[e];if(n){var i=t-n.lastFrameTime,o=$t(Xt,e),a=null!=n.lastValue&&Math.abs(n.lastValue-o)<10?n.lastValue:o;if(-1===n.dir?a>n.min:a<n.max){var r=a+n.speed*i*n.dir;r<n.min?r=n.min:r>n.max&&(r=n.max),$t(Xt,e,r),n.lastValue=r}n.lastFrameTime=t}}))},e=function(){Se.call(window,Zt),t(),Zt=ve.call(window,e)};Yt={},ye.move=function(n,i,o){Se.call(window,Zt),t(),Xt===n&&(i.x&&Yt.x&&(i.x.lastValue=Yt.x.lastValue),i.y&&Yt.y&&(i.y.lastValue=Yt.y.lastValue)),Xt=n,Yt=i,$t=o;var a=Date.now();["x","y"].forEach((function(t){var e=Yt[t];e&&(e.lastFrameTime=a)})),Zt=ve.call(window,e)},ye.stop=function(){Se.call(window,Zt),t(),Yt={},Xt=null}}function be(t,e,n){return null!=n&&("x"===e?t.scrollTo(n,t.pageYOffset):t.scrollTo(t.pageXOffset,n)),"x"===e?t.pageXOffset:t.pageYOffset}function xe(t,e,n){var i="x"===e?"scrollLeft":"scrollTop";return null!=n&&(t[i]=n),t[i]}function Ee(t){return t?re(t)?Object.keys(t).reduce((function(e,n){return e[n]=Ee(t[n]),e}),{}):Array.isArray(t)?t.map(Ee):t:t}function we(t,e){var n,i;return Tt(t)!==Tt(e)||(n=re(t)?"obj":Array.isArray(t)?"array":"")!=(re(e)?"obj":Array.isArray(e)?"array":"")||("obj"===n?we(i=Object.keys(t).sort(),Object.keys(e).sort())||i.some((function(n){return we(t[n],e[n])})):"array"===n?t.length!==e.length||t.some((function(t,n){return we(t,e[n])})):t!==e)}function _e(t){return!(!t||t.nodeType!==Node.ELEMENT_NODE||"function"!=typeof t.getBoundingClientRect||t.compareDocumentPosition(document)&Node.DOCUMENT_POSITION_DISCONNECTED)}function ke(t){if(!re(t))return null;var e;if(!se(e=t.left)&&!se(e=t.x))return null;if(t.left=t.x=e,!se(e=t.top)&&!se(e=t.y))return null;if(t.top=t.y=e,se(t.width)&&t.width>=0)t.right=t.left+t.width;else{if(!(se(t.right)&&t.right>=t.left))return null;t.width=t.right-t.left}if(se(t.height)&&t.height>=0)t.bottom=t.top+t.height;else{if(!(se(t.bottom)&&t.bottom>=t.top))return null;t.height=t.bottom-t.top}return t}function Ce(t){return se(t)?{value:t,isRatio:!1}:"string"==typeof t?(e=t.replace(/\s/g,""),(o=/^(.+?)(%)?$/.exec(e))&&se(n=parseFloat(o[1]))?{value:(i=!(!o[2]||!n))?n/100:n,isRatio:i}:null):null;var e,n,i,o}function Oe(t){return t.isRatio?"".concat(100*t.value,"%"):t.value}function Me(t,e,n){return"number"==typeof t?t:e+t.value*(t.isRatio?n:1)}function Ie(t){if(!re(t))return null;var e;if(!(e=Ce(t.left))&&!(e=Ce(t.x)))return null;if(t.left=t.x=e,!(e=Ce(t.top))&&!(e=Ce(t.y)))return null;if(t.top=t.y=e,(e=Ce(t.width))&&e.value>=0)t.width=e,delete t.right;else{if(!(e=Ce(t.right)))return null;t.right=e,delete t.width}if((e=Ce(t.height))&&e.value>=0)t.height=e,delete t.bottom;else{if(!(e=Ce(t.bottom)))return null;t.bottom=e,delete t.height}return t}function Le(t){return Object.keys(t).reduce((function(e,n){return e[n]=Oe(t[n]),e}),{})}function Ae(t,e){var n={left:"x",right:"x",x:"x",width:"x",top:"y",bottom:"y",y:"y",height:"y"},i={x:e.left,y:e.top},o={x:e.width,y:e.height};return ke(Object.keys(t).reduce((function(e,a){return e[a]=Me(t[a],"width"===a||"height"===a?0:i[n[a]],o[n[a]]),e}),{}))}function Te(t,e){var n=t.getBoundingClientRect(),i={left:n.left,top:n.top,width:n.width,height:n.height};if(i.left+=window.pageXOffset,i.top+=window.pageYOffset,e){var o=window.getComputedStyle(t,""),a=parseFloat(o.borderTopWidth)||0,r=parseFloat(o.borderRightWidth)||0,s=parseFloat(o.borderBottomWidth)||0,l=parseFloat(o.borderLeftWidth)||0;i.left+=l,i.top+=a,i.width-=l+r,i.height-=a+s}return ke(i)}function Pe(t,e){null==Dt&&(!1!==de&&(Dt=kt.getValue("cursor",de)),null==Dt&&(Dt=!1)),t.style.cursor=!1===Dt?e:Dt}function Be(t){null==Rt&&(!1!==pe&&(Rt=kt.getValue("cursor",pe)),null==Rt&&(Rt=!1)),!1!==Rt&&(t.style.cursor=Rt)}function Ve(t,e,n){var i=t.svgPoint;return i.x=e,i.y=n,i.matrixTransform(t.svgCtmElement.getScreenCTM().inverse())}function Ne(t,e){var n=t.elementBBox;if(e.left!==n.left||e.top!==n.top){var i=t.htmlOffset;return t.elementStyle[Gt]="translate(".concat(e.left+i.left,"px, ").concat(e.top+i.top,"px)"),!0}return!1}function We(t,e){var n=t.elementBBox,i=t.elementStyle,o=t.htmlOffset,a=!1;return e.left!==n.left&&(i.left=e.left+o.left+"px",a=!0),e.top!==n.top&&(i.top=e.top+o.top+"px",a=!0),a}function Fe(t,e){var n=t.elementBBox;if(e.left!==n.left||e.top!==n.top){var i=t.svgOffset,o=t.svgOriginBBox,a=Ve(t,e.left-window.pageXOffset,e.top-window.pageYOffset);return t.svgTransform.setTranslate(a.x+i.x-o.x,a.y+i.y-o.y),!0}return!1}function De(t,e,n){var i=t.elementBBox;function o(){t.minLeft>=t.maxLeft?e.left=i.left:e.left<t.minLeft?e.left=t.minLeft:e.left>t.maxLeft&&(e.left=t.maxLeft),t.minTop>=t.maxTop?e.top=i.top:e.top<t.minTop?e.top=t.minTop:e.top>t.maxTop&&(e.top=t.maxTop)}if(o(),n){if(!1===n(e))return!1;o()}var a=t.moveElm(t,e);return a&&(t.elementBBox=ke({left:e.left,top:e.top,width:i.width,height:i.height})),a}function Re(t){var e=t.element,n=t.elementStyle,i=Te(e),o=["display","marginTop","marginBottom","width","height"];o.unshift(Gt);var a=n[zt];n[zt]="none";var r=Te(e);t.orgStyle?o.forEach((function(e){null!=t.lastStyle[e]&&n[e]!==t.lastStyle[e]||(n[e]=t.orgStyle[e])})):(t.orgStyle=o.reduce((function(t,e){return t[e]=n[e]||"",t}),{}),t.lastStyle={});var s=Te(e),l=window.getComputedStyle(e,"");"inline"===l.display&&(n.display="inline-block",["Top","Bottom"].forEach((function(t){var e=parseFloat(l["padding".concat(t)]);n["margin".concat(t)]=e?"-".concat(e,"px"):"0"}))),n[Gt]="translate(0, 0)";var u=Te(e),c=t.htmlOffset={left:u.left?-u.left:0,top:u.top?-u.top:0};return n[Gt]="translate(".concat(i.left+c.left,"px, ").concat(i.top+c.top,"px)"),["width","height"].forEach((function(i){u[i]!==s[i]&&(n[i]=s[i]+"px",(u=Te(e))[i]!==s[i]&&(n[i]=s[i]-(u[i]-s[i])+"px")),t.lastStyle[i]=n[i]})),e.offsetWidth,n[zt]=a,r.left===i.left&&r.top===i.top||(n[Gt]="translate(".concat(r.left+c.left,"px, ").concat(r.top+c.top,"px)")),r}function He(t){var e=t.element,n=t.elementStyle,i=Te(e),o=["position","marginTop","marginRight","marginBottom","marginLeft","width","height"],a=n[zt];n[zt]="none";var r=Te(e);t.orgStyle?o.forEach((function(e){null!=t.lastStyle[e]&&n[e]!==t.lastStyle[e]||(n[e]=t.orgStyle[e])})):(t.orgStyle=o.reduce((function(t,e){return t[e]=n[e]||"",t}),{}),t.lastStyle={});var s=Te(e);n.position="absolute",n.left=n.top=n.margin="0";var l=Te(e),u=t.htmlOffset={left:l.left?-l.left:0,top:l.top?-l.top:0};return n.left=i.left+u.left+"px",n.top=i.top+u.top+"px",["width","height"].forEach((function(i){l[i]!==s[i]&&(n[i]=s[i]+"px",(l=Te(e))[i]!==s[i]&&(n[i]=s[i]-(l[i]-s[i])+"px")),t.lastStyle[i]=n[i]})),e.offsetWidth,n[zt]=a,r.left===i.left&&r.top===i.top||(n.left=r.left+u.left+"px",n.top=r.top+u.top+"px"),r}function ze(t){var e=t.element,n=t.svgTransform,i=e.getBoundingClientRect(),o=Te(e);n.setTranslate(0,0);var a=t.svgOriginBBox=e.getBBox(),r=e.getBoundingClientRect(),s=Ve(t,r.left,r.top),l=t.svgOffset={x:a.x-s.x,y:a.y-s.y},u=Ve(t,i.left,i.top);return n.setTranslate(u.x+l.x-a.x,u.y+l.y-a.y),o}function Ge(t,e){var n=Te(document.documentElement),i=t.elementBBox=t.initElm(t),o=t.containmentBBox=t.containmentIsBBox?Ae(t.options.containment,n)||n:Te(t.options.containment,!0);if(t.minLeft=o.left,t.maxLeft=o.right-i.width,t.minTop=o.top,t.maxTop=o.bottom-i.height,De(t,{left:i.left,top:i.top}),t.parsedSnapTargets){var a={x:i.width,y:i.height},r={x:t.minLeft,y:t.minTop},s={x:t.maxLeft,y:t.maxTop},l={left:"x",right:"x",x:"x",width:"x",xStart:"x",xEnd:"x",xStep:"x",top:"y",bottom:"y",y:"y",height:"y",yStart:"y",yEnd:"y",yStep:"y"},u=t.parsedSnapTargets.reduce((function(t,e){var u,c="containment"===e.base?o:n,h={x:c.left,y:c.top},d={x:c.width,y:c.height};function p(n){if(null==n.center&&(n.center=e.center),null==n.xGravity&&(n.xGravity=e.gravity),null==n.yGravity&&(n.yGravity=e.gravity),null!=n.x&&null!=n.y)n.x=Me(n.x,h.x,d.x),n.y=Me(n.y,h.y,d.y),n.center&&(n.x-=a.x/2,n.y-=a.y/2,n.corners=["tl"]),(n.corners||e.corners).forEach((function(e){var i=n.x-("tr"===e||"br"===e?a.x:0),o=n.y-("bl"===e||"br"===e?a.y:0);if(i>=r.x&&i<=s.x&&o>=r.y&&o<=s.y){var l={x:i,y:o},u=i-n.xGravity,c=i+n.xGravity,h=o-n.yGravity,d=o+n.yGravity;u>r.x&&(l.gravityXStart=u),c<s.x&&(l.gravityXEnd=c),h>r.y&&(l.gravityYStart=h),d<s.y&&(l.gravityYEnd=d),t.push(l)}}));else{var i=null!=n.x?"x":"y",o="x"===i?"y":"x",l="".concat(o,"Start"),u="".concat(o,"End"),c="".concat(i,"Gravity"),p=i.toUpperCase(),f=o.toUpperCase(),m="gravity".concat(p,"Start"),g="gravity".concat(p,"End"),y="gravity".concat(f,"Start"),v="gravity".concat(f,"End");if(n[i]=Me(n[i],h[i],d[i]),n[l]=Me(n[l],h[o],d[o]),n[u]=Me(n[u],h[o],d[o])-a[o],n[l]>n[u]||n[l]>s[o]||n[u]<r[o])return;n.center&&(n[i]-=a[i]/2,n.sides=["start"]),(n.sides||e.sides).forEach((function(e){var h=n[i]-("end"===e?a[i]:0);if(h>=r[i]&&h<=s[i]){var d={},p=h-n[c],f=h+n[c];d[i]=h,p>r[i]&&(d[m]=p),f<s[i]&&(d[g]=f),n[l]>r[o]&&(d[y]=n[l]),n[u]<s[o]&&(d[v]=n[u]),t.push(d)}}))}}if((u=e.element?Te(e.element):null)||e.ppBBox)e.ppBBox&&(u=Ae(e.ppBBox,c)),u&&e.edges.forEach((function(t){var n=e.gravity,o=e.gravity;"outside"===t&&(n+=i.width,o+=i.height);var a=u.left-n,r=u.right+n,s=u.top-o,l=u.bottom+o,c="inside"===t?"start":"end";p({xStart:a,xEnd:r,y:u.top,sides:[c],center:!1}),p({x:u.left,yStart:s,yEnd:l,sides:[c],center:!1}),c="inside"===t?"end":"start",p({xStart:a,xEnd:r,y:u.bottom,sides:[c],center:!1}),p({x:u.right,yStart:s,yEnd:l,sides:[c],center:!1})}));else{var f=[["x","y","xStart","xEnd","xStep","yStart","yEnd","yStep"].reduce((function(t,n){return e[n]&&(t[n]=Me(e[n],"xStep"===n||"yStep"===n?0:h[l[n]],d[l[n]])),t}),{})];["x","y"].forEach((function(t){var n="".concat(t,"Start"),i="".concat(t,"End"),o="".concat(t,"Step"),a="".concat(t,"Gravity");f=f.reduce((function(r,s){var l=s[n],u=s[i],c=s[o];if(null!=l&&null!=u&&l>=u)return r;if(null!=c){if(c<2)return r;var h=c/2;h=e.gravity>h?h:null;for(var d=l;d<=u;d+=c){var p=Object.keys(s).reduce((function(t,e){return e!==n&&e!==i&&e!==o&&(t[e]=s[e]),t}),{});p[t]=d,p[a]=h,r.push(p)}}else r.push(s);return r}),[])})),f.forEach((function(t){p(t)}))}return t}),[]);t.snapTargets=u.length?u:null}var c={},h=t.options.autoScroll;if(h){c.isWindow=h.target===window,c.target=h.target;var d="scroll"===e,p=function(t,e,n){var i,o,a,r,s={};r=e?document.documentElement:t,s.clientWidth=r.clientWidth,s.clientHeight=r.clientHeight;var l,u,c,h=0,d=0;return n||(e?(l=be(t,"x"),u=be(t,"y"),i=getComputedStyle(document.documentElement,""),o=getComputedStyle(document.body,""),h=be(t,"x",document.documentElement.scrollWidth+s.clientWidth+["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].reduce((function(t,e){return t+(parseFloat(i[e])||0)+(parseFloat(o[e])||0)}),0)),d=be(t,"y",document.documentElement.scrollHeight+s.clientHeight+["marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].reduce((function(t,e){return t+(parseFloat(i[e])||0)+(parseFloat(o[e])||0)}),0)),be(t,"x",l),be(t,"y",u)):(l=xe(t,"x"),u=xe(t,"y"),a=getComputedStyle(t,""),h=xe(t,"x",t.scrollWidth+s.clientWidth+["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].reduce((function(t,e){return t+(parseFloat(a[e])||0)}),0)),d=xe(t,"y",t.scrollHeight+s.clientHeight+["marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].reduce((function(t,e){return t+(parseFloat(a[e])||0)}),0)),xe(t,"x",l),xe(t,"y",u))),s.scrollWidth=s.clientWidth+h,s.scrollHeight=s.clientHeight+d,e?s.clientX=s.clientY=0:(c=t.getBoundingClientRect(),a||(a=getComputedStyle(t,"")),s.clientX=c.left+(parseFloat(a.borderLeftWidth)||0),s.clientY=c.top+(parseFloat(a.borderTopWidth)||0)),s}(h.target,c.isWindow,d),f=ke({left:p.clientX,top:p.clientY,width:p.clientWidth,height:p.clientHeight});d?t.autoScroll&&(c.scrollWidth=t.autoScroll.scrollWidth,c.scrollHeight=t.autoScroll.scrollHeight):(c.scrollWidth=p.scrollWidth,c.scrollHeight=p.scrollHeight),[["X","Width","left","right"],["Y","Height","top","bottom"]].forEach((function(t){var e=t[0],n=t[1],o=t[2],a=t[3],r=(c["scroll".concat(n)]||0)-p["client".concat(n)],s=h["min".concat(e)]||0,l=se(h["max".concat(e)])?h["max".concat(e)]:r;if(s<l&&s<r){l>r&&(l=r);for(var u=[],d=i[n.toLowerCase()],m=h.sensitivity.length-1;m>=0;m--){var g=h.sensitivity[m],y=h.speed[m];u.push({dir:-1,speed:y,position:f[o]+g}),u.push({dir:1,speed:y,position:f[a]-g-d})}c[e.toLowerCase()]={min:s,max:l,lines:u}}}))}t.autoScroll=c.x||c.y?c:null}function je(t){ye.stop(),Pe(t.options.handle,t.orgCursor),Ft.style.cursor=Ht,!1!==t.options.zIndex&&(t.elementStyle.zIndex=t.orgZIndex),jt&&(Ft.style[jt]=Ut);var e=Lt(t.element);ge&&e.remove(ge),me&&e.remove(me),Nt=null,ce.cancel(),t.onDragEnd&&t.onDragEnd({left:t.elementBBox.left,top:t.elementBBox.top})}function Ue(t,e){var n,i,o=t.options;function a(t,e){function n(t){return"string"==typeof t?t.replace(/[, ]+/g," ").trim().toLowerCase():null}se(e.gravity)&&e.gravity>0&&(t.gravity=e.gravity);var i=n(e.corner);if(i){if("all"!==i){var o={},a=i.split(/\s/).reduce((function(t,e){return(e="tl"===(e=e.trim().replace(/^(.).*?-(.).*$/,"$1$2"))||"lt"===e?"tl":"tr"===e||"rt"===e?"tr":"bl"===e||"lb"===e?"bl":"br"===e||"rb"===e?"br":null)&&!o[e]&&(t.push(e),o[e]=!0),t}),[]),r=a.length;i=r?4===r?"all":a.join(" "):null}i&&(t.corner=i)}var s=n(e.side);s&&("start"===s||"end"===s||"both"===s?t.side=s:"start end"!==s&&"end start"!==s||(t.side="both")),"boolean"==typeof e.center&&(t.center=e.center);var l=n(e.edge);l&&("inside"===l||"outside"===l||"both"===l?t.edge=l:"inside outside"!==l&&"outside inside"!==l||(t.edge="both"));var u="string"==typeof e.base?e.base.trim().toLowerCase():null;return!u||"containment"!==u&&"document"!==u||(t.base=u),t}if(e.containment&&(_e(e.containment)?e.containment!==o.containment&&(o.containment=e.containment,t.containmentIsBBox=!1,n=!0):(i=Ie(Ee(e.containment)))&&we(i,o.containment)&&(o.containment=i,t.containmentIsBBox=!0,n=!0)),null!=e.snap){var r=re(e.snap)&&null!=e.snap.targets?e.snap:{targets:e.snap},s=[],l=a({targets:s},r);l.gravity||(l.gravity=20),l.corner||(l.corner="tl"),l.side||(l.side="both"),"boolean"!=typeof l.center&&(l.center=!1),l.edge||(l.edge="both"),l.base||(l.base="containment");var u=(Array.isArray(r.targets)?r.targets:[r.targets]).reduce((function(t,e){if(null==e)return t;var n,i=_e(e),o=Ie(Ee(e)),r=i||o?{boundingBox:e}:re(e)&&null==e.start&&null==e.end&&null==e.step?e:{x:e,y:e},u=[],c={},h=r.boundingBox;if(i||_e(h))u.push({element:h}),c.boundingBox=h;else if(n=o||Ie(Ee(h)))u.push({ppBBox:n}),c.boundingBox=Le(n);else{var d,p=["x","y"].reduce((function(t,e){var n,i,o,a,s=r[e];return(n=Ce(s))?(t[e]=n,c[e]=Oe(n)):(re(s)&&(i=Ce(s.start),o=Ce(s.end),a=Ce(s.step),i&&o&&i.isRatio===o.isRatio&&i.value>=o.value&&(d=!0)),i=t["".concat(e,"Start")]=i||{value:0,isRatio:!1},o=t["".concat(e,"End")]=o||{value:1,isRatio:!0},c[e]={start:Oe(i),end:Oe(o)},a&&((a.isRatio?a.value>0:a.value>=2)?(t["".concat(e,"Step")]=a,c[e].step=Oe(a)):d=!0)),t}),{});if(d)return t;p.xStart&&!p.xStep&&p.yStart&&!p.yStep?u.push({xStart:p.xStart,xEnd:p.xEnd,y:p.yStart},{xStart:p.xStart,xEnd:p.xEnd,y:p.yEnd},{x:p.xStart,yStart:p.yStart,yEnd:p.yEnd},{x:p.xEnd,yStart:p.yStart,yEnd:p.yEnd}):u.push(p)}if(u.length){s.push(a(c,r));var f=c.corner||l.corner,m=c.side||l.side,g=c.edge||l.edge,y={gravity:c.gravity||l.gravity,base:c.base||l.base,center:"boolean"==typeof c.center?c.center:l.center,corners:"all"===f?qt:f.split(" "),sides:"both"===m?Kt:[m],edges:"both"===g?Qt:[g]};u.forEach((function(e){["gravity","corners","sides","center","edges","base"].forEach((function(t){e[t]=y[t]})),t.push(e)}))}return t}),[]);u.length&&(o.snap=l,we(u,t.parsedSnapTargets)&&(t.parsedSnapTargets=u,n=!0))}else e.hasOwnProperty("snap")&&t.parsedSnapTargets&&(o.snap=t.parsedSnapTargets=t.snapTargets=void 0);if(e.autoScroll){var c=re(e.autoScroll)?e.autoScroll:{target:!0===e.autoScroll?window:e.autoScroll},h={};h.target=_e(c.target)?c.target:window,h.speed=[],(Array.isArray(c.speed)?c.speed:[c.speed]).every((function(t,e){return!!(e<=2&&se(t))&&(h.speed[e]=t,!0)})),h.speed.length||(h.speed=Jt);var d=Array.isArray(c.sensitivity)?c.sensitivity:[c.sensitivity];h.sensitivity=h.speed.map((function(t,e){return se(d[e])?d[e]:te[e]})),["X","Y"].forEach((function(t){var e="min".concat(t),n="max".concat(t);se(c[e])&&c[e]>=0&&(h[e]=c[e]),se(c[n])&&c[n]>=0&&(!h[e]||c[n]>=h[e])&&(h[n]=c[n])})),we(h,o.autoScroll)&&(o.autoScroll=h,n=!0)}else e.hasOwnProperty("autoScroll")&&(o.autoScroll&&(n=!0),o.autoScroll=void 0);if(n&&Ge(t),_e(e.handle)&&e.handle!==o.handle){o.handle&&(o.handle.style.cursor=t.orgCursor,jt&&(o.handle.style[jt]=t.orgUserSelect),ce.removeStartHandler(o.handle,t.pointerEventHandlerId));var p=o.handle=e.handle;t.orgCursor=p.style.cursor,Pe(p,t.orgCursor),jt&&(t.orgUserSelect=p.style[jt],p.style[jt]="none"),ce.addStartHandler(p,t.pointerEventHandlerId)}(se(e.zIndex)||!1===e.zIndex)&&(o.zIndex=e.zIndex,t===Nt&&(t.elementStyle.zIndex=!1===o.zIndex?t.orgZIndex:o.zIndex));var f,m={left:t.elementBBox.left,top:t.elementBBox.top};se(e.left)&&e.left!==m.left&&(m.left=e.left,f=!0),se(e.top)&&e.top!==m.top&&(m.top=e.top,f=!0),f&&De(t,m),["onDrag","onMove","onDragStart","onMoveStart","onDragEnd"].forEach((function(n){"function"==typeof e[n]?(o[n]=e[n],t[n]=o[n].bind(t.ins)):e.hasOwnProperty(n)&&null==e[n]&&(o[n]=t[n]=void 0)}))}var Ye=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i={ins:this,options:{zIndex:9e3},disabled:!1};if(Object.defineProperty(this,"_id",{value:++he}),i._id=this._id,le[this._id]=i,!_e(e)||e===Ft)throw new Error("This element is not accepted.");if(n){if(!re(n))throw new Error("Invalid options.")}else n={};var o,a,r=!0;if(e instanceof SVGElement&&(o=e.ownerSVGElement)){if(!e.getBBox)throw new Error("This element is not accepted. (SVGLocatable)");if(!e.transform)throw new Error("This element is not accepted. (SVGAnimatedTransformList)");i.svgTransform=e.transform.baseVal.appendItem(o.createSVGTransform()),i.svgPoint=o.createSVGPoint();var s=e.nearestViewportElement;i.svgCtmElement=ie?s.appendChild(document.createElementNS(o.namespaceURI,"rect")):s,r=!1,i.initElm=ze,i.moveElm=Fe}else{var l=kt.getName("willChange");l&&(r=!1),!n.leftTop&&Gt?(l&&(e.style[l]="transform"),i.initElm=Re,i.moveElm=Ne):(l&&(e.style[l]="left, top"),i.initElm=He,i.moveElm=We)}i.element=function(t,e){var n=t.style;n.webkitTapHighlightColor="transparent";var i=kt.getName("boxShadow"),o=window.getComputedStyle(t,"")[i];return o&&"none"!==o||(n[i]="0 0 1px transparent"),e&&Gt&&(n[Gt]="translateZ(0)"),t}(e,r),i.elementStyle=e.style,i.orgZIndex=i.elementStyle.zIndex,fe&&Lt(e).add(fe),i.pointerEventHandlerId=ce.regStartHandler((function(t){return function(t,e){return!(t.disabled||t.onDragStart&&!1===t.onDragStart(e)||(Nt&&je(Nt),Be(t.options.handle),Ft.style.cursor=Rt||window.getComputedStyle(t.options.handle,"").cursor,!1!==t.options.zIndex&&(t.elementStyle.zIndex=t.options.zIndex),jt&&(Ft.style[jt]="none"),me&&Lt(t.element).add(me),Nt=t,Wt=!1,ue.left=t.elementBBox.left-(e.clientX+window.pageXOffset),ue.top=t.elementBBox.top-(e.clientY+window.pageYOffset),0))}(i,t)})),n.containment||(n.containment=(a=e.parentNode)&&_e(a)?a:Ft),n.handle||(n.handle=e),Ue(i,n)}var e,n,i;return e=t,i=[{key:"draggableCursor",get:function(){return de},set:function(t){de!==t&&(de=t,Dt=null,Object.keys(le).forEach((function(t){var e=le[t];e.disabled||e===Nt&&!1!==Rt||(Pe(e.options.handle,e.orgCursor),e===Nt&&(Ft.style.cursor=Ht,Ft.style.cursor=window.getComputedStyle(e.options.handle,"").cursor))})))}},{key:"draggingCursor",get:function(){return pe},set:function(t){pe!==t&&(pe=t,Rt=null,Nt&&(Be(Nt.options.handle),!1===Rt&&(Pe(Nt.options.handle,Nt.orgCursor),Ft.style.cursor=Ht),Ft.style.cursor=Rt||window.getComputedStyle(Nt.options.handle,"").cursor))}},{key:"draggableClass",get:function(){return fe},set:function(t){(t=t?t+"":void 0)!==fe&&(Object.keys(le).forEach((function(e){var n=le[e];if(!n.disabled){var i=Lt(n.element);fe&&i.remove(fe),t&&i.add(t)}})),fe=t)}},{key:"draggingClass",get:function(){return me},set:function(t){if((t=t?t+"":void 0)!==me){if(Nt){var e=Lt(Nt.element);me&&e.remove(me),t&&e.add(t)}me=t}}},{key:"movingClass",get:function(){return ge},set:function(t){if((t=t?t+"":void 0)!==ge){if(Nt&&Wt){var e=Lt(Nt.element);ge&&e.remove(ge),t&&e.add(t)}ge=t}}}],(n=[{key:"remove",value:function(){var t=le[this._id];this.disabled=!0,ce.unregStartHandler(ce.removeStartHandler(t.options.handle,t.pointerEventHandlerId)),delete le[this._id]}},{key:"setOptions",value:function(t){return re(t)&&Ue(le[this._id],t),this}},{key:"position",value:function(){return Ge(le[this._id]),this}},{key:"disabled",get:function(){return le[this._id].disabled},set:function(t){var e=le[this._id];(t=!!t)!==e.disabled&&(e.disabled=t,e.disabled?(e===Nt&&je(e),e.options.handle.style.cursor=e.orgCursor,jt&&(e.options.handle.style[jt]=e.orgUserSelect),fe&&Lt(e.element).remove(fe)):(Pe(e.options.handle,e.orgCursor),jt&&(e.options.handle.style[jt]="none"),fe&&Lt(e.element).add(fe)))}},{key:"element",get:function(){return le[this._id].element}},{key:"rect",get:function(){return Ee(le[this._id].elementBBox)}},{key:"left",get:function(){return le[this._id].elementBBox.left},set:function(t){Ue(le[this._id],{left:t})}},{key:"top",get:function(){return le[this._id].elementBBox.top},set:function(t){Ue(le[this._id],{top:t})}},{key:"containment",get:function(){var t=le[this._id];return t.containmentIsBBox?Le(t.options.containment):t.options.containment},set:function(t){Ue(le[this._id],{containment:t})}},{key:"snap",get:function(){return Ee(le[this._id].options.snap)},set:function(t){Ue(le[this._id],{snap:t})}},{key:"autoScroll",get:function(){return Ee(le[this._id].options.autoScroll)},set:function(t){Ue(le[this._id],{autoScroll:t})}},{key:"handle",get:function(){return le[this._id].options.handle},set:function(t){Ue(le[this._id],{handle:t})}},{key:"zIndex",get:function(){return le[this._id].options.zIndex},set:function(t){Ue(le[this._id],{zIndex:t})}},{key:"onDrag",get:function(){return le[this._id].options.onDrag},set:function(t){Ue(le[this._id],{onDrag:t})}},{key:"onMove",get:function(){return le[this._id].options.onMove},set:function(t){Ue(le[this._id],{onMove:t})}},{key:"onDragStart",get:function(){return le[this._id].options.onDragStart},set:function(t){Ue(le[this._id],{onDragStart:t})}},{key:"onMoveStart",get:function(){return le[this._id].options.onMoveStart},set:function(t){Ue(le[this._id],{onMoveStart:t})}},{key:"onDragEnd",get:function(){return le[this._id].options.onDragEnd},set:function(t){Ue(le[this._id],{onDragEnd:t})}}])&&At(e.prototype,n),i&&At(e,i),t}();ce.addMoveHandler(document,(function(t){if(Nt){var e={left:t.clientX+window.pageXOffset+ue.left,top:t.clientY+window.pageYOffset+ue.top};if(De(Nt,e,Nt.snapTargets?function(t){var e,n=Nt.snapTargets.length,i=!1,o=!1;for(e=0;e<n&&(!i||!o);e++){var a=Nt.snapTargets[e];(null==a.gravityXStart||t.left>=a.gravityXStart)&&(null==a.gravityXEnd||t.left<=a.gravityXEnd)&&(null==a.gravityYStart||t.top>=a.gravityYStart)&&(null==a.gravityYEnd||t.top<=a.gravityYEnd)&&(i||null==a.x||(t.left=a.x,i=!0,e=-1),o||null==a.y||(t.top=a.y,o=!0,e=-1))}return t.snapped=i||o,!Nt.onDrag||Nt.onDrag(t)}:Nt.onDrag)){var n={},i=Nt.autoScroll;if(i){var o={x:Nt.elementBBox.left-window.pageXOffset,y:Nt.elementBBox.top-window.pageYOffset};["x","y"].forEach((function(t){if(i[t]){var e=i[t].min,a=i[t].max;i[t].lines.some((function(i){return(-1===i.dir?o[t]<=i.position:o[t]>=i.position)&&(n[t]={dir:i.dir,speed:i.speed/1e3,min:e,max:a},!0)}))}}))}n.x||n.y?(ye.move(i.target,n,i.isWindow?be:xe),e.autoScroll=!0):ye.stop(),Wt||(Wt=!0,ge&&Lt(Nt.element).add(ge),Nt.onMoveStart&&Nt.onMoveStart(e)),Nt.onMove&&Nt.onMove(e)}}}));{let t=function(){Nt&&je(Nt)};ce.addEndHandler(document,t),ce.addCancelHandler(document,t)}{let t=function(){zt=kt.getName("transitionProperty"),Gt=kt.getName("transform"),Ht=Ft.style.cursor,(jt=kt.getName("userSelect"))&&(Ut=Ft.style[jt]);var t,e={};function n(t,e){t.initElm&&Ge(t,e)}var i=!1,o=nt((function(o){i||(i=!0,Nt&&(n(Nt,o.type),ce.move(),e[Nt._id]=!0),clearTimeout(t),t=setTimeout((function(){var i;i=o.type,clearTimeout(t),Object.keys(le).forEach((function(t){e[t]||n(le[t],i)})),e={}}),200),i=!1)}));window.addEventListener("resize",o,!0),window.addEventListener("scroll",o,!0)};(Ft=document.body)?t():document.addEventListener("DOMContentLoaded",(function(){Ft=document.body,t()}),!0)}var Xe,$e,Ze=Ye,qe=class{constructor(t){Xe.add(this),this.stages=null,this.nodes=t}plan(){const t=new Set;for(const e of this.nodes)0!==e.inputs.length||t.add(e);if(0===t.size)return;this.stages=[t];let e=t;for(;0<e.size;)e=r(this,Xe,$e).call(this,e),0<e.size&&this.stages.push(e)}execute(t=!0){if(!s(this.stages))if(t)for(const t of this.stages)for(const e of t)e.update(),e.updateUi();else for(const t of this.stages)for(const e of t)e.update()}static fromNodes(t){return new qe([...t])}},Ke=qe;Xe=new WeakSet,$e=function(t){const e=new Set;for(const n of t)for(const t of n.outputs)for(const n of t.inputs)e.add(u(n.target.parent));return e};var Qe,Je,tn,en,nn,on,an,rn,sn,ln,un,cn,hn,dn,pn,fn,mn,gn,yn,vn=class{constructor(t,e){this.workarea=t,this.scrollContainer=e}draggableToAbsolute(t){const e=this.scrollContainer?{left:this.scrollContainer.scrollLeft,top:this.scrollContainer.scrollTop}:{left:0,top:0};return{x:t.x-this.workarea.offsetLeft+e.left,y:t.y-this.workarea.offsetTop+e.top}}absoluteToDraggable(t){const e=this.scrollContainer?{left:this.scrollContainer.scrollLeft,top:this.scrollContainer.scrollTop}:{left:0,top:0};return{x:t.x+this.workarea.offsetLeft-e.left,y:t.y+this.workarea.offsetTop-e.top}}static forWorkarea(t,e){return new vn(t,e)}},Sn={stage:{x:2845,y:2396},nodes:[{type:"seed",id:"seed-QNK9dZ",name:"Seed",x:3e3,y:3e3,inputs:[],outputs:[{id:"output-Rcps9C",inputs:["input-gUjyDm"]},{id:"output-IL0s6U",inputs:[]}]},{type:"seed",id:"seed-vgGwv5",name:"Seed",x:3065,y:3424,inputs:[],outputs:[{id:"output-7ZYio3",inputs:[]},{id:"output-34yJYx",inputs:["input-HUuye1"]}]},{type:"script",id:"script-rUMGRx",name:"Script",x:3539,y:3276,inputs:[{id:"input-gUjyDm",output:"output-Rcps9C"},{id:"input-HUuye1",output:"output-34yJYx"}],outputs:[{id:"output-v4t1jr",inputs:[]}],behavior:{metadata:{inputs:[{identifier:"a",label:"A"},{identifier:"b",label:"B"}],outputs:[{identifier:"sum",label:"Sum"}]},script:"sum = Number(a) + Number(b);"}}]},bn={},xn=class extends HTMLElement{constructor(){super(),an.add(this),sn.add(this),dn.add(this),fn.add(this),gn.add(this),Qe.set(this,void 0),Je.set(this,void 0),tn.set(this,void 0),en.set(this,void 0),nn.set(this,void 0),on.set(this,void 0),un.set(this,void 0),cn.set(this,void 0),hn.set(this,void 0),this.nodes=new Array,this.connections=new Set,a(this,Qe,null),a(this,Je,null),a(this,tn,null),a(this,en,new Map),a(this,nn,new Map),a(this,on,null),a(this,un,!1),a(this,cn,[0,0]),a(this,hn,[0,0]),console.debug("Workarea constructed.")}get selectedNodes(){return this.nodes.filter((t=>t.selected))}connectedCallback(){this.classList.add(bn.workarea),this.addEventListener("click",(t=>this.onClick(t))),this.addEventListener("mousedown",(t=>this.onMouseDown(t))),this.addEventListener("mousemove",(t=>this.onMouseMove(t))),this.addEventListener("mouseup",(t=>this.onMouseUp(t))),document.addEventListener("keydown",(t=>this.onKeyDown(t))),document.addEventListener("keyup",(t=>this.onKeyUp(t))),console.debug("Workarea connected.")}initConnectionFrom(t,e){a(this,Qe,t);const n=document.createElement("dt-decoy");n.init(this),this.appendChild(n),a(this,Je,n),a(this,tn,new LeaderLine(o(this,Qe),o(this,Je),{color:"#0078d7",endSocket:"left",startSocket:"right"})),r(this,an,rn).call(this,e)}finalizeConnection(t){o(this,Qe)&&this.connect(o(this,Qe),t)}updateConnections(){for(const t of this.connections)t.line.position();for(const t of this.nodes)t.behaviorEditor&&t.behaviorEditor.line?.position()}connect(t,e){const n=new class{constructor(t,e){this.source=t,this.target=e,this.line=new LeaderLine(t,e,{color:"#111",endSocket:"left",startSocket:"right"})}disconnect(){this.source.disconnect(this),this.target.disconnect(this),this.line.remove()}}(t,e);t.connect(n),e.connect(n),this.connections.add(n),this.storeSnapshot()}disconnect(t){this.connections.delete(t),t.disconnect(),t.target.parent?.updateUi()}disconnectNode(t,e=!0){for(const e of t.inputs)if(e.output){if(!this.connections.has(e.output))continue;e.output.disconnect(),this.connections.delete(e.output)}for(const e of t.outputs)for(const t of e.inputs)this.connections.has(t)&&(t.disconnect(),this.connections.delete(t));e&&this.storeSnapshot()}editNodeBehavior(t,e){if(t.behaviorEditor)return void t.behaviorEditor.onClickDelete(e);const n=document.createElement("dt-node-editor");this.appendChild(n),n.init(),n.editNodeBehavior(t),n.updateUi();const i=vn.forWorkarea(this,o(this,on)??void 0).absoluteToDraggable({x:t.x+250,y:t.y-250}),a=new Ze(n,{autoScroll:!0,handle:n.getElementsByTagName("title")[0],left:i.x,onDragStart:e=>{r(this,dn,pn).call(this,t)},onMove:e=>{r(this,fn,mn).call(this,t,e),n.updateUi()},top:i.y});o(this,en).set(n,a),n.line=new LeaderLine(n,u(t.editElement),{color:"#888",dash:{len:2,gap:4},endSocket:"top",path:"grid",size:2})}cancelBehaviorEditor(t,e){t.behaviorEditor&&(t.behaviorEditor.line?.remove(),this.removeChild(t.behaviorEditor),o(this,en).delete(t.behaviorEditor),t.behaviorEditor=null,t.updateUi())}closeBehaviorEditor(t,e){t.behaviorEditor&&(t.updateBehavior(y.fromEditableScript(t.behaviorEditor.behaviorSource)),this.cancelBehaviorEditor(t,e))}onClick(t){t.target}onMouseDown(t){o(this,on)&&1===t.button&&(a(this,un,!0),a(this,cn,[t.x,t.y]),a(this,hn,[o(this,on).scrollLeft,o(this,on).scrollTop]))}onMouseMove(t){o(this,Je)&&r(this,an,rn).call(this,t),o(this,on)&&o(this,un)&&(o(this,on).scrollLeft=o(this,hn)[0]+o(this,cn)[0]-t.x,o(this,on).scrollTop=o(this,hn)[1]+o(this,cn)[1]-t.y)}onMouseUp(t){if(a(this,Qe,null),r(this,sn,ln).call(this),a(this,un,!1),t.target===this)for(const t of[...this.selectedNodes])t.deselect()}onKeyDown(t){}onKeyUp(t){}onNodeSelect(t,e){}onNodeDeselect(t,e){}onNodeResize(t){t instanceof N&&t.line?.position()}registerScrollableContainer(t){a(this,on,t)}createNode(t,e){let n=null;switch(t){case"script":n=document.createElement("dt-node-script"),r(this,gn,yn).call(this,n,e);break;case"noop":n=document.createElement("dt-node-noop"),r(this,gn,yn).call(this,n,e);break;case"row":n=document.createElement("dt-node-row"),r(this,gn,yn).call(this,n,e);break;case"seed":n=document.createElement("dt-node-seed"),r(this,gn,yn).call(this,n,e);break;case"_editor":throw new Error("Behavior editors can not be created through this code path.")}return n}deleteNode(t,e=!0){t instanceof N?this.cancelBehaviorEditor(u(t.target)):(t.behaviorEditor&&this.cancelBehaviorEditor(t),this.disconnectNode(t,e),this.nodes.splice(this.nodes.indexOf(t),1),this.removeChild(t),o(this,en).delete(t),e&&this.storeSnapshot())}deleteSelectedNodes(){for(const t of[...this.selectedNodes])this.deleteNode(t)}clear(){for(const t of[...this.nodes])this.deleteNode(t,!1)}execute(){const t=Ke.fromNodes(this.nodes);t.plan(),t.execute()}export(){const t=this.serialize(),e=JSON.stringify(t,void 0,2),n=JSON.stringify(t),i=q.compressToBase64(n);console.debug(e),console.info(`http://localhost:8080/#${i}`)}import(t){const e=q.decompressFromBase64(t);if(null===e)throw new Error("Unable to decompress snapshot!");const n=JSON.parse(e);this.deserialize(n)}storeSnapshot(){const t=this.serialize();localStorage.setItem("snapshot",JSON.stringify(t)),console.debug("Snapshot updated.")}restoreSnapshot(){const t=localStorage.getItem("snapshot");if(null===t)return;const e=JSON.parse(t);this.deserialize(e)}restoreSnapshotDemo(){this.deserialize(Sn)}deserialize(t){this.clear();const e=new Map,n=new Map,i=new Map;for(const o of t.nodes){const t=this.createNode(o.type,o);e.set(u(t.nodeId),t);for(const e of t.inputs)n.set(u(e.columnId),e);for(const e of t.outputs)i.set(u(e.columnId),e)}for(const e of t.nodes)for(const t of e.outputs)for(const e of t.inputs)this.connect(u(i.get(t.id)),u(n.get(e)));for(const t of this.nodes)for(const e of t.inputs)e.update(),e.updateUi();s(t.stage)||s(o(this,on))||o(this,on).scroll(t.stage.x,t.stage.y)}serialize(){return{stage:o(this,on)?{x:o(this,on).scrollLeft,y:o(this,on).scrollTop}:void 0,nodes:this.nodes.map((t=>t.serialize()))}}};Qe=new WeakMap,Je=new WeakMap,tn=new WeakMap,en=new WeakMap,nn=new WeakMap,on=new WeakMap,an=new WeakSet,rn=function(t){if(!s(o(this,Je))){const e=this.getBoundingClientRect();o(this,Je).style.transform=`translate(${t.pageX-e.left}px, ${t.pageY-e.top}px)`}s(o(this,tn))||o(this,tn).position()},sn=new WeakSet,ln=function(){s(o(this,Je))||(this.removeChild(o(this,Je)),a(this,Je,null)),s(o(this,tn))||(o(this,tn).remove(),a(this,tn,null))},un=new WeakMap,cn=new WeakMap,hn=new WeakMap,dn=new WeakSet,pn=function(t){o(this,nn).clear(),o(this,nn).set(t,{x:t.x,y:t.y});const e=vn.forWorkarea(this,o(this,on)??void 0);for(const t of this.selectedNodes)o(this,nn).set(t,e.absoluteToDraggable({x:t.x,y:t.y}))},fn=new WeakSet,mn=function(t,e){const n=u(o(this,nn).get(t)),i=e.left-n.x,a=e.top-n.y;for(const e of this.selectedNodes){if(e===t)continue;const n=u(o(this,nn).get(e)),r=u(o(this,en).get(e)),s={x:n.x+i,y:n.y+a};r.left=s.x,r.top=s.y;const l=vn.forWorkarea(this,o(this,on)??void 0).draggableToAbsolute(s);e.x=l.x,e.y=l.y,e.updateUi()}},gn=new WeakSet,yn=function(t,e){this.appendChild(t),t.init(e),this.nodes.push(t);const n=o(this,on)?{width:o(this,on).clientWidth,height:o(this,on).clientHeight}:{width:this.clientWidth,height:this.clientHeight};let i;i=s(e)||s(e.x)||s(e.y)?{x:this.offsetLeft+n.width/2-t.clientWidth/2,y:this.offsetTop+n.height/2-t.clientHeight/2}:vn.forWorkarea(this,o(this,on)??void 0).absoluteToDraggable(e);const a=new Ze(t,{autoScroll:!0,handle:t.getElementsByTagName("title")[0],left:i.x,onDragEnd:e=>{t.updateUi(vn.forWorkarea(this,o(this,on)??void 0).draggableToAbsolute({x:e.left,y:e.top})),console.debug(`Node ${t.nodeId} moved to ${t.x}x${t.y} (movement was ${e.left}x${e.top}).`),this.storeSnapshot()},onDragStart:e=>{r(this,dn,pn).call(this,t)},onMove:e=>{r(this,fn,mn).call(this,t,e),u(t).updateUi()},top:i.y});o(this,en).set(t,a);const l=vn.forWorkarea(this,o(this,on)??void 0).draggableToAbsolute(i);t.updateUi(l),console.debug(`Created node ${t.nodeId} at ${t.x}x${t.y}.`),this.storeSnapshot()},customElements.define("dt-workarea",xn),window.addEventListener("load",(()=>{const t=window.location.href,e=t.lastIndexOf("#");if(-1<e){const n=t.substring(e+1);document.getElementById("workarea").import(n)}}))}},t=>{t.O(0,[389],(()=>(9436,t(t.s=9436)))),t.O()}]);